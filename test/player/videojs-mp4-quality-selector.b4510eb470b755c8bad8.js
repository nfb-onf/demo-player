(self.webpackChunkNFBWebPlayer=self.webpackChunkNFBWebPlayer||[]).push([[129],{1875:(e,t,s)=>{"use strict";var n=s(3469),i=s(7163);e.exports=function(e){var t=e.getComponent("MenuItem");return e.extend(t,{constructor:function(e,s){var i=s.source;if(!n.isObject(i))throw new Error('was not provided a "source" object, but rather: '+typeof i);s=n.extend({selectable:!0,label:i.label},s),t.call(this,e,s),this.source=i},handleClick:function(e){t.prototype.handleClick.call(this,e),this.player().trigger(i.QUALITY_REQUESTED,this.source)}})}},2864:(e,t,s)=>{"use strict";var n=s(3469),i=s(7163),r=s(1875),c="vjs-quality-changing";e.exports=function(e){var t,s=e.getComponent("MenuButton"),a=r(e);return t=e.extend(s,{constructor:function(e,t){s.call(this,e,t),e.on(i.QUALITY_REQUESTED,function(t,s){this.setSelectedSource(s),e.addClass(c),e.one("loadeddata",(function(){e.removeClass(c)}))}.bind(this)),e.on(i.PLAYER_SOURCES_CHANGED,function(){this.update()}.bind(this)),e.on(i.QUALITY_SELECTED,function(e,t){this.setSelectedSource(t)}.bind(this)),e.one("ready",function(){this.selectedSrc=e.src(),this.update()}.bind(this)),this.controlText("Open quality selector menu")},setSelectedSource:function(e){var t=e?e.src:void 0;this.selectedSrc!==t&&(this.selectedSrc=t,n.each(this.items,(function(e){e.selected(e.source.src===t)})))},createItems:function(){var e=this.player(),t=e.currentSources();return!t||t.length<2?[]:n.map(t,function(t){return new a(e,{source:t,selected:t.src===this.selectedSrc})}.bind(this))},buildWrapperCSSClass:function(){return"vjs-quality-selector "+s.prototype.buildWrapperCSSClass.call(this)}}),e.registerComponent("QualitySelector",t),t}},7163:e=>{"use strict";e.exports={QUALITY_REQUESTED:"qualityRequested",QUALITY_SELECTED:"qualitySelected",PLAYER_SOURCES_CHANGED:"playerSourcesChanged"}},1470:(e,t,s)=>{"use strict";var n=s(3469),i=s(7163),r=s(2864),c=s(9006),a=s(1527);e.exports=function(e){e=e||window.videojs,r(e),c(e),e.hook("setup",(function(e){e.on(i.QUALITY_REQUESTED,(function(t,s){var i=e.currentSources(),r=e.currentTime(),c=e.playbackRate(),o=e.paused();n.each(i,(function(e){e.selected=!1})),n.findWhere(i,{src:s.src}).selected=!0,e._qualitySelectorSafeSeek&&e._qualitySelectorSafeSeek.onQualitySelectionChange(),e.src(i),e.ready((function(){e._qualitySelectorSafeSeek&&!e._qualitySelectorSafeSeek.hasFinished()||(e._qualitySelectorSafeSeek=new a(e,r),e.playbackRate(c)),o||e.play()}))}))}))},e.exports.EVENTS=i},9006:(e,t,s)=>{"use strict";var n=s(3469),i=s(7163);e.exports=function(e){e.use("*",(function(e){return{setSource:function(t,s){var r,c=e.currentSources();e._qualitySelectorSafeSeek&&e._qualitySelectorSafeSeek.onPlayerSourcesChange(),n.isEqual(c,e._qualitySelectorPreviousSources)||(e.trigger(i.PLAYER_SOURCES_CHANGED,c),e._qualitySelectorPreviousSources=c),r=n.find(c,(function(e){return!0===e.selected||"true"===e.selected||"selected"===e.selected}))||t,e.trigger(i.QUALITY_SELECTED,r),s(null,r)}}}))}},1527:(e,t,s)=>{"use strict";var n=s(219);e.exports=n.extend({init:function(e,t){this._player=e,this._seekToTime=t,this._hasFinished=!1,this._keepThisInstanceWhenPlayerSourcesChange=!1,this._seekWhenSafe()},_seekWhenSafe:function(){this._player.readyState()<3?(this._seekFn=this._seek.bind(this),this._player.one("canplay",this._seekFn)):this._seek()},onPlayerSourcesChange:function(){this._keepThisInstanceWhenPlayerSourcesChange?this._keepThisInstanceWhenPlayerSourcesChange=!1:this.cancel()},onQualitySelectionChange:function(){this.hasFinished()||(this._keepThisInstanceWhenPlayerSourcesChange=!0)},_seek:function(){this._player.currentTime(this._seekToTime),this._keepThisInstanceWhenPlayerSourcesChange=!1,this._hasFinished=!0},hasFinished:function(){return this._hasFinished},cancel:function(){this._player.off("canplay",this._seekFn),this._keepThisInstanceWhenPlayerSourcesChange=!1,this._hasFinished=!0}})}}]);
//# sourceMappingURL=videojs-mp4-quality-selector.b4510eb470b755c8bad8.js.map