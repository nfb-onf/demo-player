(self.webpackChunkNFBWebPlayer=self.webpackChunkNFBWebPlayer||[]).push([[314],{4428:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>g});var n=i(6610),o=i(5991),a=i(3349),s=i(379),r=i(6070),l=i(7608),c=i(6507),h=i(5716),u=i(5317),d=i(4486),p=i.n(d);function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=(0,l.Z)(e);if(t){var o=(0,l.Z)(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return(0,r.Z)(this,i)}}var v=c.default.getPlugin("plugin"),y={language:"en",title:null,description:null,url:null,embedCode:null,showLogo:!0,showShare:!0},C=function(e){(0,s.Z)(i,e);var t=f(i);function i(e,o){var s;return(0,n.Z)(this,i),(s=t.call(this,e)).log.level(c.default.log.level()),s.options=c.default.mergeOptions(y,o),s.playerEl=s.player.el(),s.controlPrefix="".concat(s.player.id(),"-"),s.els={},s.wasForcePausedBy=null,s.isVisible=!0,s.showOverlay=s.showOverlay.bind((0,a.Z)(s)),s.hideOverlay=s.hideOverlay.bind((0,a.Z)(s)),s.revealBlock=s.revealBlock.bind((0,a.Z)(s)),s.hideBlock=s.hideBlock.bind((0,a.Z)(s)),s.player.ready((function(){s.init()})),s}return(0,o.Z)(i,[{key:"init",value:function(){this.log("Initializing NFB Overlay plugin"),this.player.addClass("vjs-nfb-overlay"),(this.options.title||this.options.description||this.options.showShare)&&this.createTopBarContainer(),this.options.title&&this.createTitleContainer(),(this.options.description||this.options.showShare)&&this.createIconContainer(),this.options.showShare&&(this.createShareIcon(),this.createShareContainer()),this.options.description&&(this.createInfoIcon(),this.createInfoContainer()),this.options.showLogo&&this.createLogoContainer(),this.addListeners()}},{key:"addListeners",value:function(){this.player.on("useractive",this.showOverlay),this.player.on("userinactive",this.hideOverlay),this.player.on("ended",this.showOverlay)}},{key:"showOverlay",value:function(){this.isVisible||(this.log("Show overlay"),this.revealBlock(this.els.logoContainer,{slideLeft:!0}),this.revealBlock(this.els.topBarContainer,{slideDown:!0}),this.isVisible=!0)}},{key:"hideOverlay",value:function(){this.player.paused()||(this.log("Hide overlay"),this.hideBlock(this.els.logoContainer,{slideRight:!0}),this.hideBlock(this.els.topBarContainer,{slideUp:!0}),this.isVisible=!1)}},{key:"createTopBarContainer",value:function(){this.log("Creating top bar container"),this.els.topBarContainer=this.playerEl.appendChild(document.createElement("div")),this.assignControlAttributes(this.els.topBarContainer,"top-bar-container")}},{key:"createTitleContainer",value:function(){this.log("Creating title container"),this.els.titleContainer=this.els.topBarContainer.appendChild(document.createElement("div")),this.assignControlAttributes(this.els.titleContainer,"title-container");var e=this.options.title;this.options.url&&(e='<a href="'.concat(this.options.url,'" title="').concat(this.options.title,'" target="_blank">').concat(this.options.title,"</a>")),this.els.titleContainer.innerHTML=e}},{key:"createIconContainer",value:function(){this.log("Creating icon container"),this.els.iconContainer=this.els.topBarContainer.appendChild(document.createElement("div")),this.assignControlAttributes(this.els.iconContainer,"icon-container")}},{key:"createInfoIcon",value:function(){this.log("Creating info icon"),this.els.infoIcon=this.els.iconContainer.appendChild(document.createElement("button")),this.els.infoIcon.setAttribute("title",this.player.localize("More information")),this.els.infoIcon.innerHTML='<i class="icon icon-info-o"></i>'}},{key:"createInfoContainer",value:function(){var e=this;this.log("Creating info container"),this.els.infoContainer=this.playerEl.appendChild(document.createElement("div")),this.assignControlAttributes(this.els.infoContainer,"info-container"),this.hideBlock(this.els.infoContainer),this.els.infoContainer.innerHTML='\n      <button class="btn-close" title="'.concat(this.player.localize("Close"),'"><i class="icon icon-delete-o"></i></button>\n      <div class="content-container">\n        <div class="auto-center">\n          <h1>').concat(this.options.title,'</h1>\n          <div class="copy"></div>\n        </div>\n      </div>\n    ');var t=document.createElement("textarea");t.innerHTML=this.options.description,this.els.infoContainer.querySelector(".copy").innerHTML=t.value,this.els.closeInfoButton=this.els.infoContainer.querySelector(".btn-close"),this.els.infoIcon.addEventListener("click",(function(){return e.revealBlock(e.els.infoContainer,{forcePause:!0,fade:!0})})),this.els.closeInfoButton.addEventListener("click",(function(){return e.hideBlock(e.els.infoContainer,{fade:!0})}))}},{key:"createShareIcon",value:function(){this.log("Creating share icon"),this.els.shareIcon=this.els.iconContainer.appendChild(document.createElement("button")),this.els.shareIcon.setAttribute("title",this.player.localize("Share")),this.els.shareIcon.innerHTML='<i class="icon icon-share-o"></i>'}},{key:"createShareContainer",value:function(){var e=this;this.log("Creating share container"),this.els.shareContainer=this.playerEl.appendChild(document.createElement("div")),this.assignControlAttributes(this.els.shareContainer,"share-container"),this.hideBlock(this.els.shareContainer),this.els.shareContainer.innerHTML='\n      <button class="btn-close" title="'.concat(this.player.localize("Close"),'"><i class="icon icon-delete-o"></i></button>\n      <div class="content-container">\n        <div class="auto-center">\n          <div class="share-buttons">\n            ').concat(this.getFbShareButton(),"\n            ").concat(this.getTwitterShareButton(),"\n            ").concat(this.getEmailShareURL(),"\n            ").concat(this.getLinkedinShareURL(),"\n          </div>\n          ").concat(this.options.url?'<div class="input-container"><i class="icon icon-link"></i><input type="text" readonly value="'.concat(this.options.url,'"/></div>'):"","\n          ").concat(this.options.embed&&this.options.embed.html?'<div class="input-container"><i class="icon icon-embed"></i><input type="text" readonly value="'.concat(this.getEmbedCode(),'"/></div>'):"","\n        </div>\n      </div>\n    "),this.els.closeShareButton=this.els.shareContainer.querySelector(".btn-close"),this.els.shareInput=this.els.shareContainer.querySelectorAll("input"),this.els.shareIcon.addEventListener("click",(function(){return e.revealBlock(e.els.shareContainer,{forcePause:!0,fade:!0})})),this.els.closeShareButton.addEventListener("click",(function(){return e.hideBlock(e.els.shareContainer,{fade:!0})})),this.els.shareInput.forEach((function(e){e.addEventListener("click",(function(){return e.select()}))}))}},{key:"getEmbedCode",value:function(){var e=this.options.embed.html;return this.options.embed.options&&p()(this.options.embed.options,(function(t,i){e=e.replace(new RegExp("\\(\\( *".concat(i," *\\)\\)"),"gi"),t)})),e=e.replace(/"/g,"&quot;")}},{key:"getFbShareButton",value:function(){var e="https://www.facebook.com/sharer/sharer.php?u=".concat(encodeURI(this.options.url));return'<a href="'.concat(e,'" target="_blank" title="Facebook"><i class="icon icon-facebook"></i></a>')}},{key:"getTwitterShareButton",value:function(){var e="https://twitter.com/intent/tweet?text=".concat(encodeURI(this.options.url));return'<a href="'.concat(e,'" target="_blank" title="Twitter"><i class="icon icon-twitter"></i></a>')}},{key:"getEmailShareURL",value:function(){var e="mailto:?subject=".concat(this.options.title,"&amp;body=").concat(this.options.url);return'<a href="'.concat(e,'" target="_blank" title="').concat(this.player.localize("Email"),'"><i class="icon icon-enveloppe-0"></i></a>')}},{key:"getLinkedinShareURL",value:function(){var e="https://www.linkedin.com/sharing/share-offsite/?url=".concat(encodeURI(this.options.url));return'<a href="'.concat(e,'" target="_blank" title="Linkedin"><i class="icon icon-linkdin"></i></a>')}},{key:"createLogoContainer",value:function(){this.log("Creating logo container"),this.els.logoContainer=this.playerEl.appendChild(document.createElement("div")),this.assignControlAttributes(this.els.logoContainer,"logo-container"),this.els.logoContainer.innerHTML='\n      <a href="'.concat("fr"===this.options.language?"https://onf.ca":"https://nfb.ca",'" title="').concat(this.player.localize("Go to NFB website"),'" target="_blank">\n        <i class="icon icon-nfb-onf-logo"></i>\n      </a>\n    ')}},{key:"revealBlock",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e&&(t.fade?h.p8.fromTo(e,{opacity:0,y:-20,display:"none"},{opacity:1,y:0,display:"block",duration:.25,ease:u.Au.easeOut}):t.slideDown?h.p8.fromTo(e,{y:"-100%",opacity:.5},{duration:1,y:"0%",opacity:1,ease:u.Au.easeOut}):t.slideLeft?h.p8.fromTo(e,{x:"100%",opacity:.5},{duration:.5,x:"0%",opacity:1,ease:u.Au.easeOut}):e.classList.remove("_hide"),t.forcePause&&!this.player.paused()&&(this.wasForcePausedBy=e,this.player.pause()))}},{key:"hideBlock",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e&&(t.fade?h.p8.to(e,{duration:.25,opacity:0,y:-20,display:"none",ease:u.Au.easeOut}):t.slideUp?h.p8.to(e,{duration:1,opacity:.5,y:"-100%",ease:u.Au.easeOut}):t.slideRight?h.p8.to(e,{duration:.5,opacity:.5,x:"100%",ease:u.Au.easeOut}):e.classList.add("_hide"),this.wasForcePausedBy===e&&(this.wasForcePausedBy=null,this.player.play()))}},{key:"assignControlAttributes",value:function(e,t){e.id=this.controlPrefix+t,e.className="".concat(this.controlPrefix+t," ").concat(t)}}]),i}(v);C.defaultState={},C.VERSION="1.0.0",c.default.registerPlugin("nfbOverlay",C);const g=C}}]);
//# sourceMappingURL=videojs-nfb-overlay.e038d56310a373e0109c.js.map