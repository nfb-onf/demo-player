{"version":3,"sources":["webpack://NFBWebPlayer/./node_modules/@babel/runtime/helpers/esm/get.js","webpack://NFBWebPlayer/./node_modules/@babel/runtime/helpers/esm/superPropBase.js","webpack://NFBWebPlayer/./src/plugins/NFBStat.js","webpack://NFBWebPlayer/./node_modules/lodash/_baseTrim.js","webpack://NFBWebPlayer/./node_modules/lodash/_trimmedEndIndex.js","webpack://NFBWebPlayer/./node_modules/lodash/debounce.js","webpack://NFBWebPlayer/./node_modules/lodash/now.js","webpack://NFBWebPlayer/./node_modules/lodash/throttle.js","webpack://NFBWebPlayer/./node_modules/lodash/toNumber.js"],"names":["_get","target","property","receiver","Reflect","get","base","object","Object","prototype","hasOwnProperty","call","getPrototypeOf","desc","getOwnPropertyDescriptor","value","Plugin","videojs","defaults","sourceSlug","embedMode","sourceURL","unstatURL","fromIP","sessionID","platform","context","apiKey","user","NFBStat","player","options","log","level","checkRequiredOptions","initDuration","bind","initFirstPlay","onFirstPlay","onTimeUpdate","throttle","onEnded","onPause","onLeave","totalDuration","currentPercent","state","firstPlay","firstQuartile","secondQuartile","thirdQuartile","almostEnded","ended","ready","on","dispose","this","error","autoplay","onAutoPlay","one","duration","toFixed","window","addEventListener","sendGtagEvent","currentTime","onFirstQuartile","onSecondQuartile","onThirdQuartile","onAlmostEnded","sendUnstatEvent","seeking","type","warn","url","data","FormData","append","axios","catch","e","label","gtag","event_category","event_label","removeEventListener","defaultState","VERSION","trimmedEndIndex","reTrimStart","module","exports","string","slice","replace","reWhitespace","index","length","test","charAt","isObject","now","toNumber","nativeMax","Math","max","nativeMin","min","func","wait","lastArgs","lastThis","maxWait","result","timerId","lastCallTime","lastInvokeTime","leading","maxing","trailing","TypeError","invokeFunc","time","args","thisArg","undefined","apply","leadingEdge","setTimeout","timerExpired","shouldInvoke","timeSinceLastCall","trailingEdge","timeWaiting","remainingWait","debounced","isInvoking","arguments","clearTimeout","cancel","flush","root","Date","debounce","baseTrim","isSymbol","reIsBadHex","reIsBinary","reIsOctal","freeParseInt","parseInt","other","valueOf","isBinary"],"mappings":"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","file":"videojs-nfb-unstat.7e5bc167596dff2701ab.js","sourcesContent":["import superPropBase from \"./superPropBase.js\";\nexport default function _get(target, property, receiver) {\n  if (typeof Reflect !== \"undefined\" && Reflect.get) {\n    _get = Reflect.get;\n  } else {\n    _get = function _get(target, property, receiver) {\n      var base = superPropBase(target, property);\n      if (!base) return;\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n\n      if (desc.get) {\n        return desc.get.call(receiver);\n      }\n\n      return desc.value;\n    };\n  }\n\n  return _get(target, property, receiver || target);\n}","import getPrototypeOf from \"./getPrototypeOf.js\";\nexport default function _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = getPrototypeOf(object);\n    if (object === null) break;\n  }\n\n  return object;\n}","import videojs from 'video.js'\nimport get from 'lodash/get'\nimport throttle from 'lodash/throttle'\nimport axios from 'axios'\n\nconst Plugin = videojs.getPlugin('plugin')\n\n// Default options for the plugin.\nconst defaults = {\n  sourceSlug: null, // required\n  embedMode: null,\n  sourceURL: null, // Required\n  unstatURL: null,\n  fromIP: null,\n  sessionID: null,\n  platform: null, // external_embed, nfb_ca, onf_ca\n  context: null,\n  apiKey: null,\n  user: null\n}\n\n/**\n * An advanced Video.js plugin. For more information on the API\n *\n * See: https://blog.videojs.com/feature-spotlight-advanced-plugins/\n */\nclass NFBStat extends Plugin {\n  /**\n   * Create a NFBStat plugin instance.\n   *\n   * @param  {Player} player\n   *         A Video.js Player instance.\n   *\n   * @param  {Object} [options]\n   *         An optional options object.\n   *\n   *         While not a core part of the Video.js plugin architecture, a\n   *         second argument of options is a convenient way to accept inputs\n   *         from your plugin's caller.\n   */\n  constructor (player, options) {\n    // the parent class will add player under this.player\n    super(player)\n    this.log.level(videojs.log.level())\n\n    this.options = videojs.mergeOptions(defaults, options)\n\n    // If required options missing, clear the plugin\n    if (!this.checkRequiredOptions()) {\n      this.dispose()\n      return\n    }\n\n    this.initDuration = this.initDuration.bind(this)\n    this.initFirstPlay = this.initFirstPlay.bind(this)\n    this.onFirstPlay = this.onFirstPlay.bind(this)\n    this.onTimeUpdate = throttle(this.onTimeUpdate.bind(this), 5000)\n    this.onEnded = this.onEnded.bind(this)\n    this.onPause = this.onPause.bind(this)\n    this.onLeave = this.onLeave.bind(this)\n\n    this.totalDuration = 0\n    this.currentPercent = 0\n    this.state = {\n      firstPlay: false,\n      firstQuartile: false,\n      secondQuartile: false,\n      thirdQuartile: false,\n      almostEnded: false,\n      ended: false\n    }\n\n    this.player.ready(this.initFirstPlay)\n    // wait data to be loaded for duration\n    this.player.on('loadeddata', this.initDuration)\n  }\n\n  checkRequiredOptions () {\n    if (!get(this.options, 'sourceSlug')) {\n      this.log.error('Source slug needs to be defined.')\n      return false\n    }\n\n    if (!get(this.options, 'sourceURL')) {\n      this.log.error('Source URL needs to be defined.')\n      return false\n    }\n\n    return true\n  }\n\n  initFirstPlay () {\n    this.log('Init First Play')\n    if (this.player.options().autoplay) {\n      this.onAutoPlay()\n    } else {\n      this.player.one('play', this.onFirstPlay)\n    }\n  }\n\n  initDuration () {\n    this.log('Init Duration')\n    this.totalDuration = this.player.duration().toFixed(0)\n    this.player.on('ended', this.onEnded)\n    this.player.on('pause', this.onPause)\n    this.player.on('timeupdate', this.onTimeUpdate)\n    window.addEventListener('unload', this.onLeave)\n    this.sendGtagEvent('Estimated Duration', `Video - ${this.options.sourceSlug} ${this.totalDuration} Embed_mode: ${this.options.embedMode ? 'True' : 'False'}`)\n  }\n\n  onTimeUpdate () {\n    this.currentPercent = this.player.currentTime().toFixed(0) / this.totalDuration\n    if (this.currentPercent >= 0.25 && !this.state.firstQuartile) {\n      this.onFirstQuartile()\n    } else if (this.currentPercent >= 0.5 && !this.state.secondQuartile) {\n      this.onSecondQuartile()\n    } else if (this.currentPercent >= 0.75 && !this.state.thirdQuartile) {\n      this.onThirdQuartile()\n    } else if (this.currentPercent >= 0.95 && !this.state.almostEnded) {\n      this.onAlmostEnded()\n    }\n  }\n\n  onFirstPlay () {\n    this.log('On First Play')\n    this.sendUnstatEvent('play-control', 'start')\n    this.sendGtagEvent('Play', `Video - ${this.options.sourceSlug}`)\n  }\n\n  onAutoPlay () {\n    this.log('On Auto Play')\n    this.sendUnstatEvent('play-control', 'start')\n    this.sendGtagEvent('Auto Play', `Video - ${this.options.sourceSlug}`)\n  }\n\n  onFirstQuartile () {\n    this.log('On First Quartile')\n    this.state.firstQuartile = true\n    this.sendUnstatEvent('percent-point-reach', 25)\n    this.sendGtagEvent('Percent Point Reach', `Video - ${this.options.sourceSlug} 25`)\n  }\n\n  onSecondQuartile () {\n    this.log('On Second Quartile')\n    this.state.secondQuartile = true\n    this.sendUnstatEvent('percent-point-reach', 50)\n    this.sendGtagEvent('Percent Point Reach', `Video - ${this.options.sourceSlug} 50`)\n  }\n\n  onThirdQuartile () {\n    this.log('On Third Quartile')\n    this.state.thirdQuartile = true\n    this.sendUnstatEvent('percent-point-reach', 75)\n    this.sendGtagEvent('Percent Point Reach', `Video - ${this.options.sourceSlug} 75`)\n  }\n\n  onAlmostEnded () {\n    this.log('On Almost Ended')\n    this.state.almostEnded = true\n    this.sendUnstatEvent('percent-point-reach', 95)\n    this.sendGtagEvent('Percent Point Reach', `Video - ${this.options.sourceSlug} 95`)\n  }\n\n  onEnded () {\n    this.log('On Ended')\n    this.state.ended = true\n    this.sendUnstatEvent('percent-point-reach', 100)\n    this.sendGtagEvent('Percent Point Reach', `Video - ${this.options.sourceSlug} 100`)\n  }\n\n  onPause () {\n    this.log('On Pause')\n    if (this.player.seeking()) {\n      this.sendGtagEvent('View Duration', `Video - ${this.options.sourceSlug} seek ${this.player.currentTime().toFixed(0)}`)\n    } else {\n      this.sendGtagEvent('View Duration', `Video - ${this.options.sourceSlug} pause ${this.player.currentTime().toFixed(0)}`)\n    }\n  }\n\n  onLeave () {\n    this.log('On Leave')\n    this.sendGtagEvent('View Duration', `Video - ${this.options.sourceSlug} exit ${this.player.currentTime().toFixed(0)}`)\n  }\n\n  sendUnstatEvent (type, value) {\n    this.log(`Send unstat event : ${type} - ${value}`)\n    if (!this.options.unstatURL || !type || !value) {\n      this.log.warn('Unable to send unstat event')\n    }\n\n    const url = `${this.options.unstatURL}${type}/`\n    const data = new FormData()\n    data.append('url', this.options.sourceURL)\n    data.append('event_type', type)\n    data.append('event_value', value)\n    data.append('from_ip', this.options.fromIP)\n    data.append('sessionid', this.options.sessionID)\n    data.append('platform', this.options.platform)\n    data.append('context', this.options.context)\n    data.append('api_key', this.options.apiKey)\n    data.append('user', this.options.user)\n    data.append('comment', '')\n\n    axios.post(url, data)\n      .catch(e => {\n        this.log.error(e)\n      })\n  }\n\n  sendGtagEvent (type, label) {\n    this.log(`Send gtab event : ${type} - ${label}`)\n    if (!window.gtag) {\n      this.log.warn('Unable to send gtag event')\n      return\n    }\n\n    window.gtag('event', type, { event_category: 'Video', event_label: label })\n  }\n\n  dispose () {\n    window.removeEventListener('unload', this.onLeave)\n    super.dispose()\n  }\n}\n\n// Define default values for the plugin's `state` object here.\nNFBStat.defaultState = {}\n\n// Include the version number.\nNFBStat.VERSION = '1.0.0'\n\n// Register the plugin with video.js.\nvideojs.registerPlugin('nfbStat', NFBStat)\n\nexport default NFBStat\n","var trimmedEndIndex = require('./_trimmedEndIndex');\n\n/** Used to match leading whitespace. */\nvar reTrimStart = /^\\s+/;\n\n/**\n * The base implementation of `_.trim`.\n *\n * @private\n * @param {string} string The string to trim.\n * @returns {string} Returns the trimmed string.\n */\nfunction baseTrim(string) {\n  return string\n    ? string.slice(0, trimmedEndIndex(string) + 1).replace(reTrimStart, '')\n    : string;\n}\n\nmodule.exports = baseTrim;\n","/** Used to match a single whitespace character. */\nvar reWhitespace = /\\s/;\n\n/**\n * Used by `_.trim` and `_.trimEnd` to get the index of the last non-whitespace\n * character of `string`.\n *\n * @private\n * @param {string} string The string to inspect.\n * @returns {number} Returns the index of the last non-whitespace character.\n */\nfunction trimmedEndIndex(string) {\n  var index = string.length;\n\n  while (index-- && reWhitespace.test(string.charAt(index))) {}\n  return index;\n}\n\nmodule.exports = trimmedEndIndex;\n","var isObject = require('./isObject'),\n    now = require('./now'),\n    toNumber = require('./toNumber');\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        timeWaiting = wait - timeSinceLastCall;\n\n    return maxing\n      ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke)\n      : timeWaiting;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        clearTimeout(timerId);\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\nmodule.exports = debounce;\n","var root = require('./_root');\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\nmodule.exports = now;\n","var debounce = require('./debounce'),\n    isObject = require('./isObject');\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/**\n * Creates a throttled function that only invokes `func` at most once per\n * every `wait` milliseconds. The throttled function comes with a `cancel`\n * method to cancel delayed `func` invocations and a `flush` method to\n * immediately invoke them. Provide `options` to indicate whether `func`\n * should be invoked on the leading and/or trailing edge of the `wait`\n * timeout. The `func` is invoked with the last arguments provided to the\n * throttled function. Subsequent calls to the throttled function return the\n * result of the last `func` invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the throttled function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.throttle` and `_.debounce`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to throttle.\n * @param {number} [wait=0] The number of milliseconds to throttle invocations to.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=true]\n *  Specify invoking on the leading edge of the timeout.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new throttled function.\n * @example\n *\n * // Avoid excessively updating the position while scrolling.\n * jQuery(window).on('scroll', _.throttle(updatePosition, 100));\n *\n * // Invoke `renewToken` when the click event is fired, but not more than once every 5 minutes.\n * var throttled = _.throttle(renewToken, 300000, { 'trailing': false });\n * jQuery(element).on('click', throttled);\n *\n * // Cancel the trailing throttled invocation.\n * jQuery(window).on('popstate', throttled.cancel);\n */\nfunction throttle(func, wait, options) {\n  var leading = true,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  if (isObject(options)) {\n    leading = 'leading' in options ? !!options.leading : leading;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n  return debounce(func, wait, {\n    'leading': leading,\n    'maxWait': wait,\n    'trailing': trailing\n  });\n}\n\nmodule.exports = throttle;\n","var baseTrim = require('./_baseTrim'),\n    isObject = require('./isObject'),\n    isSymbol = require('./isSymbol');\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = baseTrim(value);\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nmodule.exports = toNumber;\n"],"sourceRoot":""}