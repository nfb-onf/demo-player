{"version":3,"sources":["webpack://NFBWebPlayer/./src/plugins/NFBSeekButtons.js"],"names":["Plugin","videojs","SeekButton","player","options","defaults","duration","mergedOptions","controlText","text","this","direction","e","seek","totalDuration","deltaTime","wasPlaying","paused","pause","seekTime","currentTime","play","NFBSeekButtons","log","level","forward","backward","seekDuration","ready","init","controlBar","seekForward","addChild","seekBackward","defaultState","VERSION"],"mappings":"goBAEA,IAAMA,EAASC,oBAAkB,UAG3BC,E,oCACJ,WAAaC,GAAsB,MAAdC,EAAc,uDAAJ,IAAI,eACjC,IAAMC,EAAW,CACfC,SAAU,IAGNC,EAAgBN,uBAAqBI,EAAUD,GALpB,OAMjC,cAAMD,EAAQI,IAETC,YAAY,EAAKJ,UAAUK,MARC,E,4CAWnC,WACE,2DAAqDC,KAAKN,UAAUO,a,yBAGtE,SAAaC,GACXF,KAAKG,KAAKH,KAAKN,UAAUO,a,kBAG3B,SAAMA,GACJ,IAAMG,EAAgBJ,KAAKP,SAASG,WAChCS,EAAYL,KAAKN,UAAUE,SACb,aAAdK,IACFI,IAAc,GAEhB,IAAMC,GAAcN,KAAKP,SAASc,SAC9BD,GACFN,KAAKP,SAASe,QAEhB,IAAIC,EAAWT,KAAKP,SAASiB,cAAgBL,EACzCI,GAAYL,IACdK,EAAWH,EAAaF,EAAgB,KAAQA,GAElDJ,KAAKP,SAASiB,YAAYD,GACtBH,GACFN,KAAKP,SAASkB,W,GAtCLpB,uBAAqB,WA0CpCA,4BAA0B,aAAcC,G,IAOlCoB,E,oCAcJ,WAAanB,EAAQC,GAAS,uBAE5B,cAAMD,IACDoB,IAAIC,MAAMvB,uBAHa,OAW5B,EAAKG,QAAUH,uBALE,CACfwB,SAAS,EACTC,UAAU,EACVC,aAAc,IAE8BvB,GAE9C,EAAKD,OAAOyB,OAAM,WAChB,EAAKC,UAdqB,E,mCAkB9B,WACEnB,KAAKa,IAAI,wCAELb,KAAKN,QAAQqB,UACff,KAAKP,OAAO2B,WAAWC,YAAcrB,KAAKP,OAAO2B,WAAWE,SAAS,aAAc,CACjFrB,UAAW,UACXL,SAAUI,KAAKN,QAAQuB,aACvBlB,KAAM,gBAAF,OAAkBC,KAAKN,QAAQuB,aAA/B,aACH,IAGDjB,KAAKN,QAAQsB,WACfhB,KAAKP,OAAO2B,WAAWG,aAAevB,KAAKP,OAAO2B,WAAWE,SAAS,aAAc,CAClFrB,UAAW,WACXL,SAAUI,KAAKN,QAAQuB,aACvBlB,KAAM,iBAAF,OAAmBC,KAAKN,QAAQuB,aAAhC,aACH,Q,GAhDoB3B,GAsD7BsB,EAAeY,aAAe,GAG9BZ,EAAea,QAAU,QAGzBlC,yBAAuB,iBAAkBqB,GAEzC","file":"videojs-nfb-seek-buttons.4c10591e027b27603ac3.js","sourcesContent":["import videojs from 'video.js'\n\nconst Plugin = videojs.getPlugin('plugin')\nconst Button = videojs.getComponent('Button')\n\nclass SeekButton extends Button {\n  constructor (player, options = {}) {\n    const defaults = {\n      duration: 10\n    }\n\n    const mergedOptions = videojs.mergeOptions(defaults, options)\n    super(player, mergedOptions)\n\n    this.controlText(this.options().text)\n  }\n\n  buildCSSClass () {\n    return `vjs-control vjs-button vjs-seek-button vjs-${this.options().direction}`\n  }\n\n  handleClick (e) {\n    this.seek(this.options().direction)\n  }\n\n  seek (direction) {\n    const totalDuration = this.player().duration()\n    let deltaTime = this.options().duration\n    if (direction === 'backward') {\n      deltaTime *= -1\n    }\n    const wasPlaying = !this.player().paused()\n    if (wasPlaying) {\n      this.player().pause()\n    }\n    let seekTime = this.player().currentTime() + deltaTime\n    if (seekTime >= totalDuration) { // cant seek to negative time\n      seekTime = wasPlaying ? totalDuration - 0.001 : totalDuration\n    }\n    this.player().currentTime(seekTime)\n    if (wasPlaying) {\n      this.player().play()\n    }\n  }\n}\nvideojs.registerComponent('seekButton', SeekButton)\n\n/**\n * An advanced Video.js plugin. For more information on the API\n *\n * See: https://blog.videojs.com/feature-spotlight-advanced-plugins/\n */\nclass NFBSeekButtons extends Plugin {\n  /**\n   * Create a NFBAudioDescription plugin instance.\n   *\n   * @param  {Player} player\n   *         A Video.js Player instance.\n   *\n   * @param  {Object} [options]\n   *         An optional options object.\n   *\n   *         While not a core part of the Video.js plugin architecture, a\n   *         second argument of options is a convenient way to accept inputs\n   *         from your plugin's caller.\n   */\n  constructor (player, options) {\n    // the parent class will add player under this.player\n    super(player)\n    this.log.level(videojs.log.level())\n\n    // Default options for the plugin.\n    const defaults = {\n      forward: true,\n      backward: true,\n      seekDuration: 10\n    }\n    this.options = videojs.mergeOptions(defaults, options)\n\n    this.player.ready(() => {\n      this.init()\n    })\n  }\n\n  init () {\n    this.log('Initializing NFB Seek Buttons plugin')\n\n    if (this.options.forward) {\n      this.player.controlBar.seekForward = this.player.controlBar.addChild('seekButton', {\n        direction: 'forward',\n        duration: this.options.seekDuration,\n        text: `Seek forward ${this.options.seekDuration} seconds`\n      }, 1)\n    }\n\n    if (this.options.backward) {\n      this.player.controlBar.seekBackward = this.player.controlBar.addChild('seekButton', {\n        direction: 'backward',\n        duration: this.options.seekDuration,\n        text: `Seek backward ${this.options.seekDuration} seconds`\n      }, 1)\n    }\n  }\n}\n\n// Define default values for the plugin's `state` object here.\nNFBSeekButtons.defaultState = {}\n\n// Include the version number.\nNFBSeekButtons.VERSION = '1.0.0'\n\n// Register the plugin with video.js.\nvideojs.registerPlugin('nfbSeekButtons', NFBSeekButtons)\n\nexport default NFBSeekButtons\n"],"sourceRoot":""}