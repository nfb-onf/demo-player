{"version":3,"sources":["webpack://NFBWebPlayer/./node_modules/@silvermine/videojs-chromecast/src/js/chromecast/ChromecastSessionManager.js","webpack://NFBWebPlayer/./node_modules/@silvermine/videojs-chromecast/src/js/components/ChromecastButton.js","webpack://NFBWebPlayer/./node_modules/@silvermine/videojs-chromecast/src/js/enableChromecast.js","webpack://NFBWebPlayer/./node_modules/@silvermine/videojs-chromecast/src/js/index.js","webpack://NFBWebPlayer/./node_modules/@silvermine/videojs-chromecast/src/js/preloadWebComponents.js","webpack://NFBWebPlayer/./node_modules/@silvermine/videojs-chromecast/src/js/tech/ChromecastTech.js","webpack://NFBWebPlayer/./node_modules/@silvermine/videojs-chromecast/src/js/tech/ChromecastTechUI.js","webpack://NFBWebPlayer/./node_modules/webcomponents.js/webcomponents-lite.js"],"names":["ChromecastSessionManager","Class","_","hasConnected","getCastContext","cast","framework","CastContext","getInstance","extend","init","player","this","_addCastContextEventListeners","on","_removeCastContextEventListeners","bind","_notifyPlayerOfDevicesAvailabilityChange","getCastState","remotePlayer","RemotePlayer","remotePlayerController","RemotePlayerController","sessionStateChangedEvt","CastContextEventType","SESSION_STATE_CHANGED","castStateChangedEvt","CAST_STATE_CHANGED","addEventListener","_onSessionStateChange","_onCastStateChange","removeEventListener","event","sessionState","SessionState","SESSION_ENDED","trigger","_reloadTech","castState","hasAvailableDevices","CastState","NOT_CONNECTED","CONNECTING","CONNECTED","openCastMenu","onSessionSuccess","currentSource","requestSession","then","noop","currentTime","wasPaused","paused","sources","currentSources","src","ready","pause","play","getRemotePlayer","getRemotePlayerController","isChromecastAPIAvailable","window","chrome","isChromecastConnected","module","exports","ChromecastButton","constructor","super_","apply","arguments","_onChromecastConnected","_onChromecastDisconnected","_onChromecastDevicesAvailable","_onChromecastDevicesUnavailable","controlText","chromecastSessionManager","buildCSSClass","_isChromecastConnected","prototype","handleClick","_reloadCSSClasses","show","hide","el_","className","videojs","ChromecastButtonImpl","getComponent","registerComponent","onChromecastRequested","enableChromecast","options","setOptions","receiverApplicationId","receiverAppID","media","DEFAULT_MEDIA_RECEIVER_APP_ID","autoJoinPolicy","AutoJoinPolicy","ORIGIN_SCOPED","configureCastContext","createSessionManager","indexOpt","addButtonToControlBar","controlBar","getChild","children","length","buttonPositionIndex","addChild","setUpChromecastButton","registerPlugin","pluginOptions","intervalID","tries","setInterval","CHECK_AVAILABILITY_TIMEOUT","clearInterval","waitUntilChromecastAPIsAreAvailable","preloadWebComponents","createChromecastButton","createChromecastTech","userOpts","defaults","doesUserAgentContainString","str","isString","navigator","userAgent","indexOf","needsWebComponents","document","registerElement","iosChrome","presentation","ChromecastTech","ChromecastTechUI","subclass","_eventListeners","videojsPlayer","playerId","_chromecastSessionManager","_ui","updatePoster","poster","_remotePlayer","_remotePlayerController","_listenToPlayerControllerEvents","_removeAllEventListeners","_hasPlayedAnyItem","_requestTitle","requestTitleFn","_requestSubtitle","requestSubtitleFn","_requestCustomData","requestCustomDataFn","_initialStartTime","startTime","_playSource","source","setMuted","muted","createEl","getDOMElement","ended","_isMediaLoading","playOrPause","canPause","isPaused","playerState","setSource","_currentSource","type","request","castSession","_getCastSession","mediaInfo","MediaInfo","title","subtitle","customData","_clearSessionTimeout","metadata","GenericMediaMetadata","metadataType","MetadataType","GENERIC","streamType","liveTracker","isLive","StreamType","LIVE","BUFFERED","updateTitle","updateSubtitle","LoadRequest","autoplay","_hasPlayedCurrentItem","loadMedia","triggerReady","_getMediaSession","addUpdateListener","_onMediaSessionStatusChanged","_triggerErrorEvent","setCurrentTime","time","duration","canSeek","Math","min","seek","_triggerTimeUpdateEvent","mediaSession","_hasMediaSessionEnded","idleReason","IdleReason","FINISHED","volume","volumeLevel","setVolume","setVolumeLevel","_triggerVolumeChangeEvent","isMuted","muteOrUnmute","getPoster","setPoster","buffered","seekable","createTimeRange","controls","playsinline","supportsFullScreen","setAutoplay","playbackRate","setPlaybackRate","preload","load","readyState","eventTypes","RemotePlayerEventType","_addEventListener","PLAYER_STATE_CHANGED","_onPlayerStateChanged","VOLUME_LEVEL_CHANGED","IS_MUTED_CHANGED","CURRENT_TIME_CHANGED","DURATION_CHANGED","_triggerDurationChangeEvent","target","callback","context","listener","push","_removeEventListener","index","findIndex","registeredListener","splice","states","PlayerState","PLAYING","PAUSED","IDLE","_closeSessionOnTimeout","BUFFERING","isAlive","_sessionTimeoutID","setTimeout","endSession","clearTimeout","_getCastContext","getCurrentSession","getMediaSession","ChromecastTechImpl","Tech","canPlaySource","isSupported","featuresVolumeControl","featuresPlaybackRate","movingMediaElementInDOM","featuresFullscreenResize","featuresTimeupdateEvents","featuresProgressEvents","featuresNativeTextTracks","featuresNativeAudioTracks","featuresNativeVideoTracks","registerTech","_el","_createDOMElement","el","_createElement","posterContainerEl","posterImageEl","titleEl","subtitleEl","titleContainer","appendChild","createElement","_findPosterEl","querySelector","_findPosterImageEl","_findTitleEl","_findSubtitleEl","_poster","setAttribute","classList","remove","removeAttribute","add","_title","innerHTML","_subtitle","scope","modules","WebComponents","flags","script","noOpts","location","search","slice","split","forEach","option","match","parts","a","i","attributes","name","value","log","f","register","CustomElements","hasWorkingUrl","forceJURL","u","URL","pathname","href","e","relative","Object","create","relativePathDotMapping","EOF","undefined","ALPHA","ALPHANUMERIC","jURL","toString","_isInvalid","_url","authority","_username","_password","protocol","_isRelative","host","_query","_fragment","clear","call","parse","_scheme","_port","_host","hostname","port","_path","join","_schemeData","hash","OriginalURL","createObjectURL","blob","revokeObjectURL","url","isRelativeScheme","scheme","invalid","IDNAToASCII","h","toLowerCase","percentEscape","c","unicode","charCodeAt","encodeURIComponent","percentEscapeQuery","input","stateOverride","base","err","message","errors","state","cursor","buffer","seenAt","seenBracket","loop","test","nextC","nextNextC","pop","cp","tempC","temp","parseInt","tmp","String","replace","self","WeakMap","defineProperty","counter","Date","now","random","set","key","entry","writable","get","has","global","JsMutationObserver","setImmediate","registrationsTable","setImmediateQueue","sentinel","data","queue","func","postMessage","currentRecord","recordWithOldValue","isScheduled","scheduledObservers","uidCounter","observe","node","ShadowDOMPolyfill","wrapIfNeeded","childList","characterData","attributeOldValue","attributeFilter","characterDataOldValue","SyntaxError","registration","registrations","observer","removeListeners","Registration","nodes_","addListeners","disconnect","records_","takeRecords","copyOfRecords","enqueue","record","records","recordToReplaceLast","selectRecord","dispatchCallbacks","addListeners_","subtree","removeListeners_","addTransientObserver","transientObservedNodes","removeTransientObservers","handleEvent","stopImmediatePropagation","attrName","namespace","relatedNode","namespaceURI","getRecord","attributeName","attributeNamespace","oldValue","attrChange","MutationEvent","ADDITION","prevValue","forEachAncestorAndObserverEnqueueRecord","getRecordWithOldValue","addedNodes","removedNodes","changedNode","previousSibling","nextSibling","parentNode","MutationObserver","_isPolyfilled","observers","sort","o1","o2","uid_","anyNonEmpty","removeTransientObserversFor","callback_","j","MutationRecord","original","lastRecord","newRecord","importNode","needsTemplate","HTMLTemplateElement","n","nodeType","Node","DOCUMENT_FRAGMENT_NODE","createDocumentFragment","needsCloning","t","t2","content","clone","cloneNode","childNodes","firstChild","TEMPLATE_TAG","TemplateImpl","contentDoc","implementation","createHTMLDocument","canDecorate","templateStyle","textContent","head","insertBefore","firstElementChild","HTMLElement","decorate","template","child","deep","o","outerHTML","escapeDataRegExp","escapeReplace","text","body","bootstrap","removeChild","configurable","doc","templates","querySelectorAll","l","localName","nativeCloneNode","fixClonedDom","s","s$","t$","replaceChild","originalImportNode","dom","element","performance","start","nativeRaf","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","cancelAnimationFrame","webkitCancelAnimationFrame","mozCancelAnimationFrame","id","createEvent","initEvent","preventDefault","defaultPrevented","origPreventDefault","Event","cancelable","isIE","CustomEvent","inType","params","initCustomEvent","Boolean","bubbles","detail","origEvent","HTMLImports","IMPORT_LINK_TYPE","useNative","hasShadowDOMPolyfill","wrap","rootDocument","currentScriptDescriptor","currentScript","scripts","whenReady","whenDocumentReady","imports","parsedCount","importCount","newImports","errorImports","checkDone","allImports","loadedImports","loadedImport","markTargetLoaded","errorLoadingImport","imp","isImportLoaded","watchImportsLoad","requiredReadyState","READY_EVENT","isDocumentReady","checkReady","__loaded","link","import","__importParsed","handleImports","nodes","rel","handleImport","mxns","m","readyTime","getTime","evt","dispatchEvent","addModule","initializeModules","CSS_URL_REGEXP","CSS_IMPORT_REGEXP","path","resolveUrlsInStyle","style","linkUrl","resolver","ownerDocument","resolveUrlsInCssText","cssText","urlObj","r","replaceUrls","regexp","pre","post","urlPath","xhr","async","ok","status","next","nextContext","XMLHttpRequest","debug","bust","open","redirectedUrl","locationHeader","getResponseHeader","substr","origin","console","error","response","responseText","send","loadDocument","responseType","Loader","onLoad","onComplete","cache","onload","oncomplete","inflight","pending","addNodes","require","addNode","elt","__nodeUrl","dedupe","fetch","tail","pieces","header","atob","decodeURIComponent","receive","receiveXhr","resource","p","$p","Observer","addCallback","mo","handler","mutations","root","IMPORT_SELECTOR","importParser","documentSelectors","importsSelectors","map","dynamicElements","parseNext","nextToParse","isParsed","fn","markParsing","parseDynamic","quiet","parsingElement","markParsingComplete","markDynamicParsingComplete","__importElement","parseImport","__doc","__importsParsingHook","__resource","__error","__pending","shift","parseLink","linkElt","nodeIsImport","parseGeneric","parseStyle","__appliedElement","trackElement","addElementToDocument","rootImportForElement","__importLink","done","fakeLoad","sheet","csr","cssRules","len","CSSRule","IMPORT_RULE","styleSheet","parseScript","scriptElt","scriptContent","owner","__importedScripts","moniker","baseURI","num","generateSourceMapHint","generateScriptContent","generateScriptDataUrl","_mayParse","nextToParseInDoc","nextToParseDynamic","parseSelectorsForNode","hasResource","needsDynamicParsing","parser","importer","documents","documentPreloadSelectors","importsPreloadSelectors","loadNode","importLoader","loadSubtree","parent","marshalNodes","loadSelectorsForNode","loaded","getAttribute","isLinkRel","isImportLink","_URL","getOwnPropertyDescriptor","hasBaseURIAccessor","meta","makeDocument","bootDocument","loadedAll","baseURIDescriptor","dynamic","added","parsed","loading","shouldLoadNode","shouldParseNode","matches","matchesSelector","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","attachEvent","hasNative","forSubtree","cb","findAllElements","forRoots","find","ELEMENT_NODE","nextElementSibling","shadowRoot","olderShadowRoot","_forDocumentTree","processingDocuments","forDocumentTree","addedNode","isAttached","addedSubtree","upgrade","attached","hasThrottledAttached","hasPolyfillMutations","isPendingMutations","pendingMutations","deferMutation","takeMutations","_attached","__upgraded__","__attached","attachedCallback","detached","_detached","detachedCallback","mx","d","group","inDocument","groupEnd","Array","inRoot","__observer","upgradeDocument","originalCreateShadowRoot","Element","createShadowRoot","watchShadow","__watched","upgradeDocumentTree","upgradeSubtree","upgradeAll","upgradeWithDefinition","definition","is","implementPrototype","createdCallback","created","__proto__","inTarget","inSrc","inNative","used","k","keys","getOwnPropertyNames","getPrototypeOf","customMixin","native","getRegisteredDefinition","tag","extends","changeAttribute","operation","newValue","attributeChangedCallback","reservedTagList","ancestry","extnds","extendee","concat","registry","typeExtension","ctor","domCreateElement","isInstance","domCreateElementNS","createElementNS","wrapDomMethodToForceUpgrade","obj","methodName","orig","Error","isReservedTag","__name","lifecycle","baseTag","resolveTagName","nativePrototype","inst","ancestor","proto","foundPrototype","warn","resolvePrototypeChain","_polyfilled","overrideAttributeApi","registerDefinition","instantiate","generateConstructor","instanceof","nop","elapsed","unwrap","unwrapIfNeeded","eager","loadEvent"],"mappings":"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","file":"videojs-chromecast.1ee6b3d8fb86265af6f7.js","sourcesContent":["'use strict';\n\nvar Class = require('class.extend'),\n    _ = require('underscore'),\n    hasConnected = false, // See the `isChromecastConnected` function.\n    ChromecastSessionManager;\n\nfunction getCastContext() {\n   return cast.framework.CastContext.getInstance();\n}\n\nChromecastSessionManager = Class.extend(/** @lends ChromecastSessionManager.prototype **/ {\n\n   /**\n    * Stores the state of the current Chromecast session and its associated objects such\n    * as the\n    * [RemotePlayerController](https://developers.google.com/cast/docs/reference/chrome/cast.framework.RemotePlayerController),\n    * and the\n    * [RemotePlayer](https://developers.google.com/cast/docs/reference/chrome/cast.framework.RemotePlayer).\n    *\n    * WARNING: Do not instantiate this class until the\n    * [CastContext](https://developers.google.com/cast/docs/reference/chrome/cast.framework.CastContext)\n    * has been configured.\n    *\n    * For an undocumented (and thus unknown) reason, RemotePlayer and\n    * RemotePlayerController instances created before the cast context has been configured\n    * or after requesting a session or loading media will not stay in sync with media\n    * items that are loaded later.\n    *\n    * For example, the first item that you cast will work as expected: events on\n    * RemotePlayerController will fire and the state (currentTime, duration, etc) of the\n    * RemotePlayer instance will update as the media item plays. However, if a new media\n    * item is loaded via a `loadMedia` request, the media item will play, but the\n    * remotePlayer will be in a \"media unloaded\" state where the duration is 0, the\n    * currentTime does not update, and no change events are fired (except, strangely,\n    * displayStatus updates).\n    *\n    * @param player {object} Video.js Player\n    * @constructs ChromecastSessionManager\n    */\n   init: function(player) {\n      this.player = player;\n\n      this._addCastContextEventListeners();\n\n      // Remove global event listeners when this player instance is destroyed to prevent\n      // memory leaks.\n      this.player.on('dispose', this._removeCastContextEventListeners.bind(this));\n\n      this._notifyPlayerOfDevicesAvailabilityChange(this.getCastContext().getCastState());\n\n      this.remotePlayer = new cast.framework.RemotePlayer();\n      this.remotePlayerController = new cast.framework.RemotePlayerController(this.remotePlayer);\n   },\n\n   /**\n    * Add event listeners for events triggered on the current CastContext.\n    *\n    * @private\n    */\n   _addCastContextEventListeners: function() {\n      var sessionStateChangedEvt = cast.framework.CastContextEventType.SESSION_STATE_CHANGED,\n          castStateChangedEvt = cast.framework.CastContextEventType.CAST_STATE_CHANGED;\n\n      this.getCastContext().addEventListener(sessionStateChangedEvt, this._onSessionStateChange.bind(this));\n      this.getCastContext().addEventListener(castStateChangedEvt, this._onCastStateChange.bind(this));\n   },\n\n   /**\n    * Remove event listeners that were added in {@link\n    * ChromecastSessionManager#_addCastContextEventListeners}.\n    *\n    * @private\n    */\n   _removeCastContextEventListeners: function() {\n      var sessionStateChangedEvt = cast.framework.CastContextEventType.SESSION_STATE_CHANGED,\n          castStateChangedEvt = cast.framework.CastContextEventType.CAST_STATE_CHANGED;\n\n      this.getCastContext().removeEventListener(sessionStateChangedEvt);\n      this.getCastContext().removeEventListener(castStateChangedEvt);\n   },\n\n   /**\n    * Handle the CastContext's SessionState change event.\n    *\n    * @private\n    */\n   _onSessionStateChange: function(event) {\n      if (event.sessionState === cast.framework.SessionState.SESSION_ENDED) {\n         this.player.trigger('chromecastDisconnected');\n         this._reloadTech();\n      }\n   },\n\n   /**\n    * Handle the CastContext's CastState change event.\n    *\n    * @private\n    */\n   _onCastStateChange: function(event) {\n      this._notifyPlayerOfDevicesAvailabilityChange(event.castState);\n   },\n\n   /**\n    * Triggers player events that notifies listeners that Chromecast devices are\n    * either available or unavailable.\n    *\n    * @private\n    */\n   _notifyPlayerOfDevicesAvailabilityChange: function(castState) {\n      if (this.hasAvailableDevices(castState)) {\n         this.player.trigger('chromecastDevicesAvailable');\n      } else {\n         this.player.trigger('chromecastDevicesUnavailable');\n      }\n   },\n\n   /**\n    * Returns whether or not there are Chromecast devices available to cast to.\n    *\n    * @see https://developers.google.com/cast/docs/reference/chrome/cast.framework#.CastState\n    * @param {String} castState\n    * @return {boolean} true if there are Chromecast devices available to cast to.\n    */\n   hasAvailableDevices: function(castState) {\n      castState = castState || this.getCastContext().getCastState();\n\n      return castState === cast.framework.CastState.NOT_CONNECTED ||\n         castState === cast.framework.CastState.CONNECTING ||\n         castState === cast.framework.CastState.CONNECTED;\n   },\n\n   /**\n    * Opens the Chromecast casting menu by requesting a CastSession. Does nothing if the\n    * Video.js player does not have a source.\n    */\n   openCastMenu: function() {\n      var onSessionSuccess;\n\n      if (!this.player.currentSource()) {\n         // Do not cast if there is no media item loaded in the player\n         return;\n      }\n      onSessionSuccess = function() {\n         hasConnected = true;\n         this.player.trigger('chromecastConnected');\n         this._reloadTech();\n      }.bind(this);\n\n      // It is the `requestSession` function call that actually causes the cast menu to\n      // open.\n      // The second parameter to `.then` is an error handler. We use _.noop here\n      // because we handle errors in the ChromecastTech class and we do not want an\n      // error to bubble up to the console. This error handler is also triggered when\n      // the user closes out of the chromecast selector pop-up without choosing a\n      // casting destination.\n      this.getCastContext().requestSession()\n         .then(onSessionSuccess, _.noop);\n   },\n\n   /**\n    * Reloads the Video.js player's Tech. This causes the player to re-evaluate which\n    * Tech should be used for the current source by iterating over available Tech and\n    * calling `Tech.isSupported` and `Tech.canPlaySource`. Video.js uses the first\n    * Tech that returns true from both of those functions. This is what allows us to\n    * switch back and forth between the Chromecast Tech and other available Tech when a\n    * CastSession is connected or disconnected.\n    *\n    * @private\n    */\n   _reloadTech: function() {\n      var player = this.player,\n          currentTime = player.currentTime(),\n          wasPaused = player.paused(),\n          sources = player.currentSources();\n\n      // Reload the current source(s) to re-lookup and use the currently available Tech.\n      // The chromecast Tech gets used if `ChromecastSessionManager.isChromecastConnected`\n      // is true (effectively, if a chromecast session is currently in progress),\n      // otherwise Video.js continues to search through the Tech list for other eligible\n      // Tech to use, such as the HTML5 player.\n      player.src(sources);\n\n      player.ready(function() {\n         if (wasPaused) {\n            player.pause();\n         } else {\n            player.play();\n         }\n         player.currentTime(currentTime || 0);\n      });\n   },\n\n   /**\n    * @see https://developers.google.com/cast/docs/reference/chrome/cast.framework.CastContext\n    * @returns {object} the current CastContext, if one exists\n    */\n   getCastContext: getCastContext,\n\n   /**\n    * @see https://developers.google.com/cast/docs/reference/chrome/cast.framework.RemotePlayer\n    * @returns {object} the current RemotePlayer, if one exists\n    */\n   getRemotePlayer: function() {\n      return this.remotePlayer;\n   },\n\n   /**\n    * @see https://developers.google.com/cast/docs/reference/chrome/cast.framework.RemotePlayerController\n    * @returns {object} the current RemotePlayerController, if one exists\n    */\n   getRemotePlayerController: function() {\n      return this.remotePlayerController;\n   },\n});\n\n\n/**\n * Returns whether or not the current Chromecast API is available (that is,\n * `window.chrome`, `window.chrome.cast`, and `window.cast` exist).\n *\n * @static\n * @returns {boolean} true if the Chromecast API is available\n */\nChromecastSessionManager.isChromecastAPIAvailable = function() {\n   return window.chrome && window.chrome.cast && window.cast;\n};\n\n/**\n * Returns whether or not there is a current CastSession and it is connected.\n *\n * @static\n * @returns {boolean} true if the current CastSession exists and is connected\n */\nChromecastSessionManager.isChromecastConnected = function() {\n   // We must also check the `hasConnected` flag because\n   // `getCastContext().getCastState()` returns `CONNECTED` even when the current casting\n   // session was initiated by another tab in the browser or by another process.\n   return ChromecastSessionManager.isChromecastAPIAvailable() &&\n      (getCastContext().getCastState() === cast.framework.CastState.CONNECTED) &&\n      hasConnected;\n};\n\nmodule.exports = ChromecastSessionManager;\n","'use strict';\n\n/**\n * The ChromecastButton module contains both the ChromecastButton class definition and\n * the function used to register the button as a Video.js Component.\n *\n * @module ChromecastButton\n */\n\nvar ChromecastButton;\n\n/**\n* The Video.js Button class is the base class for UI button components.\n*\n* @external Button\n* @see {@link http://docs.videojs.com/Button.html|Button}\n*/\n\n/** @lends ChromecastButton.prototype */\nChromecastButton = {\n\n   /**\n    * This class is a button component designed to be displayed in the player UI's control\n    * bar. It opens the Chromecast menu when clicked.\n    *\n    * @constructs\n    * @extends external:Button\n    * @param player {Player} the video.js player instance\n    */\n   constructor: function(player) {\n      this.constructor.super_.apply(this, arguments);\n\n      player.on('chromecastConnected', this._onChromecastConnected.bind(this));\n      player.on('chromecastDisconnected', this._onChromecastDisconnected.bind(this));\n      player.on('chromecastDevicesAvailable', this._onChromecastDevicesAvailable.bind(this));\n      player.on('chromecastDevicesUnavailable', this._onChromecastDevicesUnavailable.bind(this));\n\n      this.controlText('Open Chromecast menu');\n\n      // Use the initial state of `hasAvailableDevices` to call the corresponding event\n      // handlers because the corresponding events may have already been emitted before\n      // binding the listeners above.\n      if (player.chromecastSessionManager && player.chromecastSessionManager.hasAvailableDevices()) {\n         this._onChromecastDevicesAvailable();\n      } else {\n         this._onChromecastDevicesUnavailable();\n      }\n   },\n\n   /**\n    * Overrides Button#buildCSSClass to return the classes used on the button element.\n    *\n    * @param el {DOMElement}\n    * @see {@link http://docs.videojs.com/Button.html#buildCSSClass|Button#buildCSSClass}\n    */\n   buildCSSClass: function() {\n      return 'vjs-chromecast-button ' + (this._isChromecastConnected ? 'vjs-chromecast-casting-state ' : '') +\n         this.constructor.super_.prototype.buildCSSClass();\n   },\n\n   /**\n    * Overrides Button#handleClick to handle button click events. Chromecast functionality\n    * is handled outside of this class, which should be limited to UI related logic. This\n    * function simply triggers an event on the player.\n    *\n    * @fires ChromecastButton#chromecastRequested\n    * @param el {DOMElement}\n    * @see {@link http://docs.videojs.com/Button.html#handleClick|Button#handleClick}\n    */\n   handleClick: function() {\n      this.player().trigger('chromecastRequested');\n   },\n\n   /**\n    * Handles `chromecastConnected` player events.\n    *\n    * @private\n    */\n   _onChromecastConnected: function() {\n      this._isChromecastConnected = true;\n      this._reloadCSSClasses();\n   },\n\n   /**\n    * Handles `chromecastDisconnected` player events.\n    *\n    * @private\n    */\n   _onChromecastDisconnected: function() {\n      this._isChromecastConnected = false;\n      this._reloadCSSClasses();\n   },\n\n   /**\n    * Handles `chromecastDevicesAvailable` player events.\n    *\n    * @private\n    */\n   _onChromecastDevicesAvailable: function() {\n      this.show();\n   },\n\n   /**\n    * Handles `chromecastDevicesUnavailable` player events.\n    *\n    * @private\n    */\n   _onChromecastDevicesUnavailable: function() {\n      this.hide();\n   },\n\n   /**\n    * Re-calculates which CSS classes the button needs and sets them on the buttons'\n    * DOMElement.\n    *\n    * @private\n    */\n   _reloadCSSClasses: function() {\n      if (!this.el_) {\n         return;\n      }\n      this.el_.className = this.buildCSSClass();\n   },\n};\n\n/**\n * Registers the ChromecastButton Component with Video.js. Calls\n * {@link http://docs.videojs.com/Component.html#.registerComponent}, which will add a\n * component called `chromecastButton` to the list of globally registered Video.js\n * components. The `chromecastButton` is added to the player's control bar UI\n * automatically once {@link module:enableChromecast} has been called. If you would like\n * to specify the order of the buttons that appear in the control bar, including this\n * button, you can do so in the options that you pass to the `videojs` function when\n * creating a player:\n *\n * ```\n * videojs('playerID', {\n *    controlBar: {\n *       children: [\n *          'playToggle',\n *          'progressControl',\n *          'volumePanel',\n *          'fullscreenToggle',\n *          'chromecastButton',\n *       ],\n *    }\n * });\n * ```\n *\n * @param videojs {object} A reference to {@link http://docs.videojs.com/module-videojs.html|Video.js}\n * @see http://docs.videojs.com/module-videojs.html#~registerPlugin\n */\nmodule.exports = function(videojs) {\n   var ChromecastButtonImpl;\n\n   ChromecastButtonImpl = videojs.extend(videojs.getComponent('Button'), ChromecastButton);\n   videojs.registerComponent('chromecastButton', ChromecastButtonImpl);\n};\n","'use strict';\n\n/**\n * @module enableChromecast\n */\n\nvar ChromecastSessionManager = require('./chromecast/ChromecastSessionManager'),\n    _ = require('underscore'),\n    CHECK_AVAILABILITY_INTERVAL = 1000, // milliseconds\n    CHECK_AVAILABILITY_TIMEOUT = 30 * 1000; // milliseconds\n\n\n/**\n * Configures the Chromecast\n * [casting context](https://developers.google.com/cast/docs/reference/chrome/cast.framework.CastContext),\n * which is required before casting.\n *\n * @private\n * @param options {object} the plugin options\n */\nfunction configureCastContext(options) {\n   var context = cast.framework.CastContext.getInstance();\n\n   context.setOptions({\n      receiverApplicationId: options.receiverAppID || chrome.cast.media.DEFAULT_MEDIA_RECEIVER_APP_ID,\n      // Setting autoJoinPolicy to ORIGIN_SCOPED prevents this plugin from automatically\n      // trying to connect to a preexisting Chromecast session, if one exists. The user\n      // must end any existing session before trying to cast from this player instance.\n      autoJoinPolicy: chrome.cast.AutoJoinPolicy.ORIGIN_SCOPED,\n   });\n}\n\n/**\n * Handles the `chromecastRequested` event. Delegates to a `chromecastSessionManager`\n * instance.\n *\n * @private\n * @param player {object} a Video.js player instance\n */\nfunction onChromecastRequested(player) {\n   player.chromecastSessionManager.openCastMenu();\n}\n\n/**\n * Adds the Chromecast button to the player's control bar, if one does not already exist,\n * then starts listening for the `chromecastRequested` event.\n *\n * @private\n * @param player {object} a Video.js player instance\n * @param options {object} the plugin options\n */\nfunction setUpChromecastButton(player, options) {\n   var indexOpt;\n\n   // Ensure Chromecast button exists\n   if (options.addButtonToControlBar && !player.controlBar.getChild('chromecastButton')) {\n      // Figure out Chromecast button's index\n      indexOpt = player.controlBar.children().length;\n      if (typeof options.buttonPositionIndex !== 'undefined') {\n         indexOpt = options.buttonPositionIndex >= 0\n            ? options.buttonPositionIndex\n            : player.controlBar.children().length + options.buttonPositionIndex;\n      }\n      player.controlBar.addChild('chromecastButton', options, indexOpt);\n   }\n   // Respond to requests for casting. The ChromecastButton component triggers this event\n   // when the user clicks the Chromecast button.\n   player.on('chromecastRequested', onChromecastRequested.bind(null, player));\n}\n\n/**\n * Creates a {@link ChromecastSessionManager} and assigns it to the player.\n *\n * @private\n * @param player {object} a Video.js player instance\n */\nfunction createSessionManager(player) {\n   if (!player.chromecastSessionManager) {\n      player.chromecastSessionManager = new ChromecastSessionManager(player);\n   }\n}\n\n/**\n * Sets up and configures the casting context and Chromecast button.\n *\n * @private\n * @param options {object} the plugin options\n */\nfunction enableChromecast(player, options) {\n   configureCastContext(options);\n   createSessionManager(player);\n   setUpChromecastButton(player, options);\n}\n\n/**\n * Waits for the Chromecast APIs to become available, then configures the casting context\n * and configures the Chromecast button. The Chromecast APIs are loaded asynchronously,\n * so we must wait until they are available before initializing the casting context and\n * Chromecast button.\n *\n * @private\n * @param player {object} a Video.js player instance\n * @param options {object} the plugin options\n */\nfunction waitUntilChromecastAPIsAreAvailable(player, options) {\n   var maxTries = CHECK_AVAILABILITY_TIMEOUT / CHECK_AVAILABILITY_INTERVAL,\n       tries = 1,\n       intervalID;\n\n   // The Chromecast APIs are loaded asynchronously, so they may not be loaded and\n   // initialized at this point. The Chromecast APIs do provide a callback function that\n   // is called after the framework has loaded, but it requires you to define the callback\n   // function **before** loading the APIs. That would require us to expose some callback\n   // function to `window` here, and would require users of this plugin to define a\n   // Chromecast API callback on `window` that calls our callback function in their HTML\n   // file. To avoid all of this, we simply check to see if the Chromecast API is\n   // available periodically, and stop after a timeout threshold has passed.\n   //\n   // See https://developers.google.com/cast/docs/chrome_sender_integrate#initialization\n   intervalID = setInterval(function() {\n      if (tries > maxTries) {\n         clearInterval(intervalID);\n         return;\n      }\n      if (ChromecastSessionManager.isChromecastAPIAvailable()) {\n         clearInterval(intervalID);\n         enableChromecast(player, options);\n      }\n      tries = tries + 1;\n   }, CHECK_AVAILABILITY_INTERVAL);\n\n}\n\n/**\n * Registers the Chromecast plugin with Video.js. Calls\n * [videojs#registerPlugin](http://docs.videojs.com/module-videojs.html#~registerPlugin),\n * which will add a plugin function called `chromecast` to any instance of a Video.js\n * player that is created after calling this function. Call `player.chromecast(options)`,\n * passing in configuration options, to enable the Chromecast plugin on your Player\n * instance.\n *\n * Currently, there are only two configuration options:\n *\n *    * **`receiverAppID`** - the string ID of a [Chromecast receiver\n *      app](https://developers.google.com/cast/docs/receiver_apps) to use. Defaults to\n *      the [default Media Receiver\n *      ID](https://developers.google.com/cast/docs/receiver_apps#default).\n *    * **`addButtonToControlBar`** - flag that tells the plugin\n *      whether or not it should automatically add the Chromecast button the the Video.js\n *      player's control bar component. Defaults to `true`.\n *\n * Other configuration options are set through the player's Chromecast Tech configuration:\n *\n * ```\n * var playerOptions, player, pluginOptions;\n *\n * playerOptions = {\n *    chromecast: {\n *       requestTitleFn: function(source) {\n *          return titles[source.url];\n *       },\n *       requestSubtitleFn: function(source) {\n *          return subtitles[source.url];\n *       },\n *       requestCustomDataFn: function(source) {\n *          return customData[source.url];\n *       }\n *    }\n * };\n *\n * pluginOptions = {\n *    receiverAppID: '1234',\n *    addButtonToControlBar: false,\n * };\n *\n * player = videojs(document.getElementById('myVideoElement'), playerOptions);\n * player.chromecast(pluginOptions); // initializes the Chromecast plugin\n * ```\n *\n * @param {object} videojs\n * @see http://docs.videojs.com/module-videojs.html#~registerPlugin\n */\nmodule.exports = function(videojs) {\n   videojs.registerPlugin('chromecast', function(options) {\n      var pluginOptions = _.extend({ addButtonToControlBar: true }, options || {});\n\n      // `this` is an instance of a Video.js Player.\n      // Wait until the player is \"ready\" so that the player's control bar component has\n      // been created.\n      this.ready(function() {\n         if (!this.controlBar) {\n            return;\n         }\n         if (ChromecastSessionManager.isChromecastAPIAvailable()) {\n            enableChromecast(this, pluginOptions);\n         } else {\n            waitUntilChromecastAPIsAreAvailable(this, pluginOptions);\n         }\n      }.bind(this));\n   });\n};\n","/* eslint-disable global-require */\n'use strict';\n\nvar _ = require('underscore'),\n    preloadWebComponents = require('./preloadWebComponents'),\n    createChromecastButton = require('./components/ChromecastButton'),\n    createChromecastTech = require('./tech/ChromecastTech'),\n    enableChromecast = require('./enableChromecast');\n\n/**\n * @module index\n */\n\n/**\n * Registers the Chromecast plugin and ChromecastButton Component with Video.js. See\n * {@link module:ChromecastButton} and {@link module:enableChromecast} for more details\n * about how the plugin and button are registered and configured.\n *\n * @param videojs {object} the videojs library. If `undefined`, this plugin\n * will look to `window.videojs`.\n * @param userOpts {object} the options to use for configuration\n * @see module:enableChromecast\n * @see module:ChromecastButton\n */\nmodule.exports = function(videojs, userOpts) {\n   var options = _.defaults(_.extend({}, userOpts), { preloadWebComponents: false });\n\n   if (options.preloadWebComponents) {\n      preloadWebComponents();\n   }\n\n   videojs = videojs || window.videojs;\n   createChromecastButton(videojs);\n   createChromecastTech(videojs);\n   enableChromecast(videojs);\n};\n","'use strict';\n\nvar _ = require('underscore');\n\nfunction doesUserAgentContainString(str) {\n   return _.isString(window.navigator.userAgent) && window.navigator.userAgent.indexOf(str) >= 0;\n}\n\n// For information as to why this is needed, please see:\n// https://github.com/silvermine/videojs-chromecast/issues/17\n// https://github.com/silvermine/videojs-chromecast/issues/22\n\nmodule.exports = function() {\n   var needsWebComponents = !document.registerElement,\n       iosChrome = doesUserAgentContainString('CriOS'),\n       androidChrome;\n\n   androidChrome = doesUserAgentContainString('Android')\n      && doesUserAgentContainString('Chrome/')\n      && window.navigator.presentation;\n\n   // These checks are based on the checks found in `cast_sender.js` which\n   // determine if `cast_framework.js` needs to be loaded\n   if ((androidChrome || iosChrome) && needsWebComponents) {\n      // This is requiring webcomponents.js@0.7.24 because that's what was used\n      // by the Chromecast framework at the time this was added.\n      // We are using webcomponents-lite.js because it doesn't interfere with jQuery as\n      // badly (e.g. it doesn't interfere with jQuery's fix for consistently bubbling\n      // events, see #21). While the \"lite\" version does not include the shadow DOM\n      // polyfills that the Chromecast framework may need for the <google-cast-button>\n      // component to work properly, this plugin does not use the <google-cast-button>\n      // component.\n      require('webcomponents.js/webcomponents-lite.js'); // eslint-disable-line global-require\n   }\n};\n","'use strict';\n\nvar ChromecastSessionManager = require('../chromecast/ChromecastSessionManager'),\n    ChromecastTechUI = require('./ChromecastTechUI'),\n    _ = require('underscore'),\n    SESSION_TIMEOUT = 10 * 1000, // milliseconds\n    ChromecastTech;\n\n/**\n * @module ChomecastTech\n */\n\n/**\n * The Video.js Tech class is the base class for classes that provide media playback\n * technology implementations to Video.js such as HTML5, Flash and HLS.\n *\n * @external Tech\n * @see {@link http://docs.videojs.com/Tech.html|Tech}\n */\n\n/** @lends ChromecastTech.prototype */\nChromecastTech = {\n\n   /**\n    * Implements Video.js playback {@link http://docs.videojs.com/tutorial-tech_.html|Tech}\n    * for {@link https://developers.google.com/cast/|Google's Chromecast}.\n    *\n    * @constructs ChromecastTech\n    * @extends external:Tech\n    * @param options {object} The options to use for configuration\n    * @see {@link https://developers.google.com/cast/|Google Cast}\n    */\n   constructor: function(options) {\n      var subclass;\n\n      this._eventListeners = [];\n\n      this.videojsPlayer = this.videojs(options.playerId);\n      this._chromecastSessionManager = this.videojsPlayer.chromecastSessionManager;\n\n      // We have to initialize the UI here, before calling super.constructor\n      // because the constructor calls `createEl`, which references `this._ui`.\n      this._ui = new ChromecastTechUI();\n      this._ui.updatePoster(this.videojsPlayer.poster());\n\n      // Call the super class' constructor function\n      subclass = this.constructor.super_.apply(this, arguments);\n\n      this._remotePlayer = this._chromecastSessionManager.getRemotePlayer();\n      this._remotePlayerController = this._chromecastSessionManager.getRemotePlayerController();\n      this._listenToPlayerControllerEvents();\n      this.on('dispose', this._removeAllEventListeners.bind(this));\n\n      this._hasPlayedAnyItem = false;\n      this._requestTitle = options.requestTitleFn || _.noop;\n      this._requestSubtitle = options.requestSubtitleFn || _.noop;\n      this._requestCustomData = options.requestCustomDataFn || _.noop;\n      // See `currentTime` function\n      this._initialStartTime = options.startTime || 0;\n\n      this._playSource(options.source, this._initialStartTime);\n      this.ready(function() {\n         this.setMuted(options.muted);\n      }.bind(this));\n\n      return subclass;\n   },\n\n   /**\n    * Creates a DOMElement that Video.js displays in its player UI while this Tech is\n    * active.\n    *\n    * @returns {DOMElement}\n    * @see {@link http://docs.videojs.com/Tech.html#createEl}\n    */\n   createEl: function() {\n      return this._ui.getDOMElement();\n   },\n\n   /**\n    * Resumes playback if a media item is paused or restarts an item from its beginning if\n    * the item has played and ended.\n    *\n    * @see {@link http://docs.videojs.com/Player.html#play}\n    */\n   play: function() {\n      if (!this.paused()) {\n         return;\n      }\n      if (this.ended() && !this._isMediaLoading) {\n         // Restart the current item from the beginning\n         this._playSource({ src: this.videojsPlayer.src() }, 0);\n      } else {\n         this._remotePlayerController.playOrPause();\n      }\n   },\n\n   /**\n    * Pauses playback if the player is not already paused and if the current media item\n    * has not ended yet.\n    *\n    * @see {@link http://docs.videojs.com/Player.html#pause}\n    */\n   pause: function() {\n      if (!this.paused() && this._remotePlayer.canPause) {\n         this._remotePlayerController.playOrPause();\n      }\n   },\n\n   /**\n    * Returns whether or not the player is \"paused\". Video.js' definition of \"paused\" is\n    * \"playback paused\" OR \"not playing\".\n    *\n    * @returns {boolean} true if playback is paused\n    * @see {@link http://docs.videojs.com/Player.html#paused}\n    */\n   paused: function() {\n      return this._remotePlayer.isPaused || this.ended() || this._remotePlayer.playerState === null;\n   },\n\n   /**\n    * Stores the given source and begins playback, starting at the beginning\n    * of the media item.\n    *\n    * @param source {object} the source to store and play\n    * @see {@link http://docs.videojs.com/Player.html#src}\n    */\n   setSource: function(source) {\n      if (this._currentSource && this._currentSource.src === source.src && this._currentSource.type === source.type) {\n         // Skip setting the source if the `source` argument is the same as what's already\n         // been set. This `setSource` function calls `this._playSource` which sends a\n         // \"load media\" request to the Chromecast PlayerController. Because this function\n         // may be called multiple times in rapid succession with the same `source`\n         // argument, we need to de-duplicate calls with the same `source` argument to\n         // prevent overwhelming the Chromecast PlayerController with expensive \"load\n         // media\" requests, which it itself does not de-duplicate.\n         return;\n      }\n      // We cannot use `this.videojsPlayer.currentSource()` because the value returned by\n      // that function is not the same as what's returned by the Video.js Player's\n      // middleware after they are run. Also, simply using `this.videojsPlayer.src()`\n      // does not include mimetype information which we pass to the Chromecast player.\n      this._currentSource = source;\n      this._playSource(source, 0);\n   },\n\n   /**\n    * Plays the given source, beginning at an optional starting time.\n    *\n    * @private\n    * @param source {object} the source to play\n    * @param [startTime] The time to start playback at, in seconds\n    * @see {@link http://docs.videojs.com/Player.html#src}\n    */\n   _playSource: function(source, startTime) {\n      var castSession = this._getCastSession(),\n          mediaInfo = new chrome.cast.media.MediaInfo(source.src, source.type),\n          title = this._requestTitle(source),\n          subtitle = this._requestSubtitle(source),\n          customData = this._requestCustomData(source),\n          request;\n\n      this.trigger('waiting');\n      this._clearSessionTimeout();\n\n      mediaInfo.metadata = new chrome.cast.media.GenericMediaMetadata();\n      mediaInfo.metadata.metadataType = chrome.cast.media.MetadataType.GENERIC;\n      mediaInfo.metadata.title = title;\n      mediaInfo.metadata.subtitle = subtitle;\n      mediaInfo.streamType = this.videojsPlayer.liveTracker && this.videojsPlayer.liveTracker.isLive()\n         ? chrome.cast.media.StreamType.LIVE\n         : chrome.cast.media.StreamType.BUFFERED;\n\n      if (customData) {\n         mediaInfo.customData = customData;\n      }\n\n      this._ui.updateTitle(title);\n      this._ui.updateSubtitle(subtitle);\n\n      request = new chrome.cast.media.LoadRequest(mediaInfo);\n      request.autoplay = true;\n      request.currentTime = startTime;\n\n      this._isMediaLoading = true;\n      this._hasPlayedCurrentItem = false;\n      castSession.loadMedia(request)\n         .then(function() {\n            if (!this._hasPlayedAnyItem) {\n               // `triggerReady` is required here to notify the Video.js player that the\n               // Tech has been initialized and is ready.\n               this.triggerReady();\n            }\n            this.trigger('loadstart');\n            this.trigger('loadeddata');\n            this.trigger('play');\n            this.trigger('playing');\n            this._hasPlayedAnyItem = true;\n            this._isMediaLoading = false;\n            this._getMediaSession().addUpdateListener(this._onMediaSessionStatusChanged.bind(this));\n         }.bind(this), this._triggerErrorEvent.bind(this));\n   },\n\n   /**\n    * Manually updates the current time. The playback position will jump to the given time\n    * and continue playing if the item was playing when `setCurrentTime` was called, or\n    * remain paused if the item was paused.\n    *\n    * @param time {number} the playback time position to jump to\n    * @see {@link http://docs.videojs.com/Tech.html#setCurrentTime}\n    */\n   setCurrentTime: function(time) {\n      var duration = this.duration();\n\n      if (time > duration || !this._remotePlayer.canSeek) {\n         return;\n      }\n      // Seeking to any place within (approximately) 1 second of the end of the item\n      // causes the Video.js player to get stuck in a BUFFERING state. To work around\n      // this, we only allow seeking to within 1 second of the end of an item.\n      this._remotePlayer.currentTime = Math.min(duration - 1, time);\n      this._remotePlayerController.seek();\n      this._triggerTimeUpdateEvent();\n   },\n\n   /**\n    * Returns the current playback time position.\n    *\n    * @returns {number} the current playback time position\n    * @see {@link http://docs.videojs.com/Player.html#currentTime}\n    */\n   currentTime: function() {\n      // There is a brief period of time when Video.js has switched to the chromecast\n      // Tech, but chromecast has not yet loaded its first media item. During that time,\n      // Video.js calls this `currentTime` function to update its player UI. In that\n      // period, `this._remotePlayer.currentTime` will be 0 because the media has not\n      // loaded yet. To prevent the UI from using a 0 second currentTime, we use the\n      // currentTime passed in to the first media item that was provided to the Tech until\n      // chromecast plays its first item.\n      if (!this._hasPlayedAnyItem) {\n         return this._initialStartTime;\n      }\n      return this._remotePlayer.currentTime;\n   },\n\n   /**\n    * Returns the duration of the current media item, or `0` if the source is not set or\n    * if the duration of the item is not available from the Chromecast API yet.\n    *\n    * @returns {number} the duration of the current media item\n    * @see {@link http://docs.videojs.com/Player.html#duration}\n    */\n   duration: function() {\n      // There is a brief period of time when Video.js has switched to the chromecast\n      // Tech, but chromecast has not yet loaded its first media item. During that time,\n      // Video.js calls this `duration` function to update its player UI. In that period,\n      // `this._remotePlayer.duration` will be 0 because the media has not loaded yet. To\n      // prevent the UI from using a 0 second duration, we use the duration passed in to\n      // the first media item that was provided to the Tech until chromecast plays its\n      // first item.\n      if (!this._hasPlayedAnyItem) {\n         return this.videojsPlayer.duration();\n      }\n      return this._remotePlayer.duration;\n   },\n\n   /**\n    * Returns whether or not the current media item has finished playing. Returns `false`\n    * if a media item has not been loaded, has not been played, or has not yet finished\n    * playing.\n    *\n    * @returns {boolean} true if the current media item has finished playing\n    * @see {@link http://docs.videojs.com/Player.html#ended}\n    */\n   ended: function() {\n      var mediaSession = this._getMediaSession();\n\n      if (!mediaSession && this._hasMediaSessionEnded) {\n         return true;\n      }\n\n      return mediaSession ? (mediaSession.idleReason === chrome.cast.media.IdleReason.FINISHED) : false;\n   },\n\n   /**\n    * Returns the current volume level setting as a decimal number between `0` and `1`.\n    *\n    * @returns {number} the current volume level\n    * @see {@link http://docs.videojs.com/Player.html#volume}\n    */\n   volume: function() {\n      return this._remotePlayer.volumeLevel;\n   },\n\n   /**\n    * Sets the current volume level. Volume level is a decimal number between `0` and `1`,\n    * where `0` is muted and `1` is the loudest volume level.\n    *\n    * @param volumeLevel {number}\n    * @returns {number} the current volume level\n    * @see {@link http://docs.videojs.com/Player.html#volume}\n    */\n   setVolume: function(volumeLevel) {\n      this._remotePlayer.volumeLevel = volumeLevel;\n      this._remotePlayerController.setVolumeLevel();\n      // This event is triggered by the listener on\n      // `RemotePlayerEventType.VOLUME_LEVEL_CHANGED`, but waiting for that event to fire\n      // in response to calls to `setVolume` introduces noticeable lag in the updating of\n      // the player UI's volume slider bar, which makes user interaction with the volume\n      // slider choppy.\n      this._triggerVolumeChangeEvent();\n   },\n\n   /**\n    * Returns whether or not the player is currently muted.\n    *\n    * @returns {boolean} true if the player is currently muted\n    * @see {@link http://docs.videojs.com/Player.html#muted}\n    */\n   muted: function() {\n      return this._remotePlayer.isMuted;\n   },\n\n   /**\n    * Mutes or un-mutes the player. Does nothing if the player is currently muted and the\n    * `isMuted` parameter is true or if the player is not muted and `isMuted` is false.\n    *\n    * @param isMuted {boolean} whether or not the player should be muted\n    * @see {@link http://docs.videojs.com/Html5.html#setMuted} for an example\n    */\n   setMuted: function(isMuted) {\n      if ((this._remotePlayer.isMuted && !isMuted) || (!this._remotePlayer.isMuted && isMuted)) {\n         this._remotePlayerController.muteOrUnmute();\n      }\n   },\n\n   /**\n    * Gets the URL to the current poster image.\n    *\n    * @returns {string} URL to the current poster image or `undefined` if none exists\n    * @see {@link http://docs.videojs.com/Player.html#poster}\n    */\n   poster: function() {\n      return this._ui.getPoster();\n   },\n\n   /**\n    * Sets the URL to the current poster image. The poster image shown in the Chromecast\n    * Tech UI view is updated with this new URL.\n    *\n    * @param poster {string} the URL to the new poster image\n    * @see {@link http://docs.videojs.com/Tech.html#setPoster}\n    */\n   setPoster: function(poster) {\n      this._ui.updatePoster(poster);\n   },\n\n   /**\n    * This function is \"required\" when implementing {@link external:Tech} and is supposed\n    * to return a mock\n    * {@link https://developer.mozilla.org/en-US/docs/Web/API/TimeRanges|TimeRanges}\n    * object that represents the portions of the current media item that have been\n    * buffered. However, the Chromecast API does not currently provide a way to determine\n    * how much the media item has buffered, so we always return `undefined`.\n    *\n    * Returning `undefined` is safe: the player will simply not display the buffer amount\n    * indicator in the scrubber UI.\n    *\n    * @returns {undefined} always returns `undefined`\n    * @see {@link http://docs.videojs.com/Player.html#buffered}\n    */\n   buffered: function() {\n      return undefined;\n   },\n\n   /**\n    * This function is \"required\" when implementing {@link external:Tech} and is supposed\n    * to return a mock\n    * {@link https://developer.mozilla.org/en-US/docs/Web/API/TimeRanges|TimeRanges}\n    * object that represents the portions of the current media item that has playable\n    * content. However, the Chromecast API does not currently provide a way to determine\n    * how much the media item has playable content, so we'll just assume the entire video\n    * is an available seek target.\n    *\n    * The risk here lies with live streaming, where there may exist a sliding window of\n    * playable content and seeking is only possible within the last X number of minutes,\n    * rather than for the entire video.\n    *\n    * Unfortunately we have no way of detecting when this is the case. Returning anything\n    * other than the full range of the video means that we lose the ability to seek during\n    * VOD.\n    *\n    * @returns {TimeRanges} always returns a `TimeRanges` object with one `TimeRange` that\n    * starts at `0` and ends at the `duration` of the current media item\n    * @see {@link http://docs.videojs.com/Player.html#seekable}\n    */\n   seekable: function() {\n      // TODO Investigate if there's a way to detect if the source is live, so that we can\n      // possibly adjust the seekable `TimeRanges` accordingly.\n      return this.videojs.createTimeRange(0, this.duration());\n   },\n\n   /**\n    * Returns whether the native media controls should be shown (`true`) or hidden\n    * (`false`). Not applicable to this Tech.\n    *\n    * @returns {boolean} always returns `false`\n    * @see {@link http://docs.videojs.com/Html5.html#controls} for an example\n    */\n   controls: function() {\n      return false;\n   },\n\n   /**\n    * Returns whether or not the browser should show the player \"inline\" (non-fullscreen)\n    * by default. This function always returns true to tell the browser that non-\n    * fullscreen playback is preferred.\n    *\n    * @returns {boolean} always returns `true`\n    * @see {@link http://docs.videojs.com/Html5.html#playsinline} for an example\n    */\n   playsinline: function() {\n      return true;\n   },\n\n   /**\n    * Returns whether or not fullscreen is supported by this Tech. Always returns `true`\n    * because fullscreen is always supported.\n    *\n    * @returns {boolean} always returns `true`\n    * @see {@link http://docs.videojs.com/Html5.html#supportsFullScreen} for an example\n    */\n   supportsFullScreen: function() {\n      return true;\n   },\n\n   /**\n    * Sets a flag that determines whether or not the media should automatically begin\n    * playing on page load. This is not supported because a Chromecast session must be\n    * initiated by casting via the casting menu and cannot autoplay.\n    *\n    * @see {@link http://docs.videojs.com/Html5.html#setAutoplay} for an example\n    */\n   setAutoplay: function() {\n      // Not supported\n   },\n\n   /**\n    * @returns {number} the chromecast player's playback rate, if available. Otherwise,\n    * the return value defaults to `1`.\n    */\n   playbackRate: function() {\n      var mediaSession = this._getMediaSession();\n\n      return mediaSession ? mediaSession.playbackRate : 1;\n   },\n\n   /**\n    * Does nothing. Changing the playback rate is not supported.\n    */\n   setPlaybackRate: function() {\n      // Not supported\n   },\n\n   /**\n    * Does nothing. Satisfies calls to the missing preload method.\n    */\n   preload: function() {\n      // Not supported\n   },\n\n   /**\n    * Causes the Tech to begin loading the current source. `load` is not supported in this\n    * ChromecastTech because setting the source on the `Chromecast` automatically causes\n    * it to begin loading.\n    */\n   load: function() {\n      // Not supported\n   },\n\n   /**\n    * Gets the Chromecast equivalent of HTML5 Media Element's `readyState`.\n    *\n    * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLMediaElement/readyState\n    */\n   readyState: function() {\n      if (this._remotePlayer.playerState === 'IDLE' || this._remotePlayer.playerState === 'BUFFERING') {\n         return 0; // HAVE_NOTHING\n      }\n      return 4;\n   },\n\n   /**\n    * Wires up event listeners for\n    * [RemotePlayerController](https://developers.google.com/cast/docs/reference/chrome/cast.framework.RemotePlayerController)\n    * events.\n    *\n    * @private\n    */\n   _listenToPlayerControllerEvents: function() {\n      var eventTypes = cast.framework.RemotePlayerEventType;\n\n      this._addEventListener(this._remotePlayerController, eventTypes.PLAYER_STATE_CHANGED, this._onPlayerStateChanged, this);\n      this._addEventListener(this._remotePlayerController, eventTypes.VOLUME_LEVEL_CHANGED, this._triggerVolumeChangeEvent, this);\n      this._addEventListener(this._remotePlayerController, eventTypes.IS_MUTED_CHANGED, this._triggerVolumeChangeEvent, this);\n      this._addEventListener(this._remotePlayerController, eventTypes.CURRENT_TIME_CHANGED, this._triggerTimeUpdateEvent, this);\n      this._addEventListener(this._remotePlayerController, eventTypes.DURATION_CHANGED, this._triggerDurationChangeEvent, this);\n   },\n\n   /**\n    * Registers an event listener on the given target object. Because many objects in the\n    * Chromecast API are either singletons or must be shared between instances of\n    * `ChromecastTech` for the lifetime of the player, we must unbind the listeners when\n    * this Tech instance is destroyed to prevent memory leaks. To do that, we need to keep\n    * a reference to listeners that are added to global objects so that we can use those\n    * references to remove the listener when this Tech is destroyed.\n    *\n    * @param target {object} the object to register the event listener on\n    * @param type {string} the name of the event\n    * @param callback {Function} the listener's callback function that executes when the\n    * event is emitted\n    * @param context {object} the `this` context to use when executing the `callback`\n    * @private\n    */\n   _addEventListener: function(target, type, callback, context) {\n      var listener;\n\n      listener = {\n         target: target,\n         type: type,\n         callback: callback,\n         context: context,\n         listener: callback.bind(context),\n      };\n      target.addEventListener(type, listener.listener);\n      this._eventListeners.push(listener);\n   },\n\n   /**\n    * Removes all event listeners that were registered with global objects during the\n    * lifetime of this Tech. See {@link _addEventListener} for more information about why\n    * this is necessary.\n    *\n    * @private\n    */\n   _removeAllEventListeners: function() {\n      while (this._eventListeners.length > 0) {\n         this._removeEventListener(this._eventListeners[0]);\n      }\n      this._eventListeners = [];\n   },\n\n   /**\n    * Removes a single event listener that was registered with global objects during the\n    * lifetime of this Tech. See {@link _addEventListener} for more information about why\n    * this is necessary.\n    *\n    * @private\n    */\n   _removeEventListener: function(listener) {\n      var index;\n\n      listener.target.removeEventListener(listener.type, listener.listener);\n\n      index = _.findIndex(this._eventListeners, function(registeredListener) {\n         return registeredListener.target === listener.target &&\n            registeredListener.type === listener.type &&\n            registeredListener.callback === listener.callback &&\n            registeredListener.context === listener.context;\n      });\n\n      if (index !== -1) {\n         this._eventListeners.splice(index, 1);\n      }\n   },\n\n   /**\n    * Handles Chromecast player state change events. The player may \"change state\" when\n    * paused, played, buffering, etc.\n    *\n    * @private\n    */\n   _onPlayerStateChanged: function() {\n      var states = chrome.cast.media.PlayerState,\n          playerState = this._remotePlayer.playerState;\n\n      if (playerState === states.PLAYING) {\n         this._hasPlayedCurrentItem = true;\n         this.trigger('play');\n         this.trigger('playing');\n      } else if (playerState === states.PAUSED) {\n         this.trigger('pause');\n      } else if ((playerState === states.IDLE && this.ended()) || (playerState === null && this._hasPlayedCurrentItem)) {\n         this._hasPlayedCurrentItem = false;\n         this._closeSessionOnTimeout();\n         this.trigger('ended');\n         this._triggerTimeUpdateEvent();\n      } else if (playerState === states.BUFFERING) {\n         this.trigger('waiting');\n      }\n   },\n\n   /**\n    * Handles Chromecast MediaSession state change events. The only property sent to this\n    * event is whether the session is alive. This is useful for determining if an item has\n    * ended as the MediaSession will fire this event with `false` then be immediately\n    * destroyed. This means that we cannot trust `idleReason` to show whether an item has\n    * ended since we may no longer have access to the MediaSession.\n    *\n    * @private\n    */\n   _onMediaSessionStatusChanged: function(isAlive) {\n      this._hasMediaSessionEnded = !!isAlive;\n   },\n\n   /**\n    * Ends the session after a certain number of seconds of inactivity.\n    *\n    * If the Chromecast player is in the \"IDLE\" state after an item has ended, and no\n    * further items are queued up to play, the session is considered inactive. Once a\n    * period of time (currently 10 seconds) has elapsed with no activity, we manually end\n    * the session to prevent long periods of a blank Chromecast screen that is shown at\n    * the end of item playback.\n    *\n    * @private\n    */\n   _closeSessionOnTimeout: function() {\n      // Ensure that there's never more than one session timeout active\n      this._clearSessionTimeout();\n      this._sessionTimeoutID = setTimeout(function() {\n         var castSession = this._getCastSession();\n\n         if (castSession) {\n            castSession.endSession(true);\n         }\n         this._clearSessionTimeout();\n      }.bind(this), SESSION_TIMEOUT);\n   },\n\n   /**\n    * Stops the timeout that is waiting during a period of inactivity in order to close\n    * the session.\n    *\n    * @private\n    * @see _closeSessionOnTimeout\n    */\n   _clearSessionTimeout: function() {\n      if (this._sessionTimeoutID) {\n         clearTimeout(this._sessionTimeoutID);\n         this._sessionTimeoutID = false;\n      }\n   },\n\n   /**\n    * @private\n    * @return {object} the current CastContext, if one exists\n    */\n   _getCastContext: function() {\n      return this._chromecastSessionManager.getCastContext();\n   },\n\n   /**\n    * @private\n    * @return {object} the current CastSession, if one exists\n    */\n   _getCastSession: function() {\n      return this._getCastContext().getCurrentSession();\n   },\n\n   /**\n    * @private\n    * @return {object} the current MediaSession, if one exists\n    * @see https://developers.google.com/cast/docs/reference/chrome/chrome.cast.media.Media\n    */\n   _getMediaSession: function() {\n      var castSession = this._getCastSession();\n\n      return castSession ? castSession.getMediaSession() : null;\n   },\n\n   /**\n    * Triggers a 'volumechange' event\n    * @private\n    * @see http://docs.videojs.com/Player.html#event:volumechange\n    */\n   _triggerVolumeChangeEvent: function() {\n      this.trigger('volumechange');\n   },\n\n   /**\n    * Triggers a 'timeupdate' event\n    * @private\n    * @see http://docs.videojs.com/Player.html#event:timeupdate\n    */\n   _triggerTimeUpdateEvent: function() {\n      this.trigger('timeupdate');\n   },\n\n   /**\n    * Triggers a 'durationchange' event\n    * @private\n    * @see http://docs.videojs.com/Player.html#event:durationchange\n    */\n   _triggerDurationChangeEvent: function() {\n      this.trigger('durationchange');\n   },\n\n   /**\n    * Triggers an 'error' event\n    * @private\n    * @see http://docs.videojs.com/Player.html#event:error\n    */\n   _triggerErrorEvent: function() {\n      this.trigger('error');\n   },\n};\n\n/**\n * Registers the ChromecastTech Tech with Video.js. Calls {@link\n * http://docs.videojs.com/Tech.html#.registerTech}, which will add a Tech called\n * `chromecast` to the list of globally registered Video.js Tech implementations.\n *\n * [Video.js Tech](http://docs.videojs.com/Tech.html) are initialized and used\n * automatically by Video.js Player instances. Whenever a new source is set on the player,\n * the player iterates through the list of available Tech to determine which to use to\n * play the source.\n *\n * @param videojs {object} A reference to\n * {@link http://docs.videojs.com/module-videojs.html|Video.js}\n * @see http://docs.videojs.com/Tech.html#.registerTech\n */\nmodule.exports = function(videojs) {\n   var Tech = videojs.getComponent('Tech'),\n       ChromecastTechImpl;\n\n   ChromecastTechImpl = videojs.extend(Tech, ChromecastTech);\n\n   // Required for Video.js Tech implementations.\n   // TODO Consider a more comprehensive check based on mimetype.\n   ChromecastTechImpl.canPlaySource = ChromecastSessionManager.isChromecastConnected.bind(ChromecastSessionManager);\n   ChromecastTechImpl.isSupported = ChromecastSessionManager.isChromecastConnected.bind(ChromecastSessionManager);\n\n   ChromecastTechImpl.prototype.featuresVolumeControl = true;\n   ChromecastTechImpl.prototype.featuresPlaybackRate = false;\n   ChromecastTechImpl.prototype.movingMediaElementInDOM = false;\n   ChromecastTechImpl.prototype.featuresFullscreenResize = true;\n   ChromecastTechImpl.prototype.featuresTimeupdateEvents = true;\n   ChromecastTechImpl.prototype.featuresProgressEvents = false;\n   // Text tracks are not supported in this version\n   ChromecastTechImpl.prototype.featuresNativeTextTracks = false;\n   ChromecastTechImpl.prototype.featuresNativeAudioTracks = false;\n   ChromecastTechImpl.prototype.featuresNativeVideoTracks = false;\n\n   // Give ChromecastTech class instances a reference to videojs\n   ChromecastTechImpl.prototype.videojs = videojs;\n\n   videojs.registerTech('chromecast', ChromecastTechImpl);\n};\n","'use strict';\n\nvar Class = require('class.extend'),\n    ChromecastTechUI;\n\n/**\n * This class represents the UI that is shown in the player while the Chromecast Tech is\n * active. The UI has a single root DOM element that displays the poster image of the\n * current item and title and subtitle. This class receives updates to the poster, title\n * and subtitle when the media item that the player is playing changes.\n *\n * @class ChromecastTechUI\n */\nChromecastTechUI = Class.extend(/** @lends ChromecastTechUI.prototype */ {\n   init: function() {\n      this._el = this._createDOMElement();\n   },\n\n   /**\n    * Creates and returns a single DOMElement that contains the UI. This implementation\n    * of the Chromecast Tech's UI displays a poster image, a title and a subtitle.\n    *\n    * @private\n    * @returns {DOMElement}\n    */\n   _createDOMElement: function() {\n      var el = this._createElement('div', 'vjs-tech vjs-tech-chromecast'),\n          posterContainerEl = this._createElement('div', 'vjs-tech-chromecast-poster'),\n          posterImageEl = this._createElement('img', 'vjs-tech-chromecast-poster-img'),\n          titleEl = this._createElement('div', 'vjs-tech-chromecast-title'),\n          subtitleEl = this._createElement('div', 'vjs-tech-chromecast-subtitle'),\n          titleContainer = this._createElement('div', 'vjs-tech-chromecast-title-container');\n\n      posterContainerEl.appendChild(posterImageEl);\n      titleContainer.appendChild(titleEl);\n      titleContainer.appendChild(subtitleEl);\n\n      el.appendChild(titleContainer);\n      el.appendChild(posterContainerEl);\n\n      return el;\n   },\n\n   /**\n    * A helper method for creating DOMElements of the given type and with the given class\n    * name(s).\n    *\n    * @param type {string} the kind of DOMElement to create (ex: 'div')\n    * @param className {string} the class name(s) to give to the DOMElement. May also be\n    * a space-delimited list of class names.\n    * @returns {DOMElement}\n    */\n   _createElement: function(type, className) {\n      var el = document.createElement(type);\n\n      el.className = className;\n      return el;\n   },\n\n   /**\n    * Gets the root DOMElement to be shown in the player's UI.\n    *\n    * @returns {DOMElement}\n    */\n   getDOMElement: function() {\n      return this._el;\n   },\n\n   /**\n    * Finds the poster's DOMElement in the root UI element.\n    *\n    * @private\n    * @returns {DOMElement}\n    */\n   _findPosterEl: function() {\n      return this._el.querySelector('.vjs-tech-chromecast-poster');\n   },\n\n   /**\n    * Finds the poster's <img> DOMElement in the root UI element.\n    *\n    * @private\n    * @returns {DOMElement}\n    */\n   _findPosterImageEl: function() {\n      return this._el.querySelector('.vjs-tech-chromecast-poster-img');\n   },\n\n   /**\n    * Finds the title's DOMElement in the root UI element.\n    *\n    * @private\n    * @returns {DOMElement}\n    */\n   _findTitleEl: function() {\n      return this._el.querySelector('.vjs-tech-chromecast-title');\n   },\n\n   /**\n    * Finds the subtitle's DOMElement in the root UI element.\n    *\n    * @private\n    * @returns {DOMElement}\n    */\n   _findSubtitleEl: function() {\n      return this._el.querySelector('.vjs-tech-chromecast-subtitle');\n   },\n\n   /**\n    * Sets the current poster image URL and updates the poster image DOMElement with the\n    * new poster image URL.\n    *\n    * @param poster {string} a URL for a poster image\n    */\n   updatePoster: function(poster) {\n      var posterImageEl = this._findPosterImageEl();\n\n      this._poster = poster ? poster : null;\n      if (poster) {\n         posterImageEl.setAttribute('src', poster);\n         posterImageEl.classList.remove('vjs-tech-chromecast-poster-img-empty');\n      } else {\n         posterImageEl.removeAttribute('src');\n         posterImageEl.classList.add('vjs-tech-chromecast-poster-img-empty');\n      }\n   },\n\n   /**\n    * Gets the current poster image URL.\n    *\n    * @returns {string} the URL for th current poster image\n    */\n   getPoster: function() {\n      return this._poster;\n   },\n\n   /**\n    * Sets the current title and updates the title's DOMElement with the new text.\n    *\n    * @param title {string} a title to show\n    */\n   updateTitle: function(title) {\n      var titleEl = this._findTitleEl();\n\n      this._title = title;\n      if (title) {\n         titleEl.innerHTML = title;\n         titleEl.classList.remove('vjs-tech-chromecast-title-empty');\n      } else {\n         titleEl.classList.add('vjs-tech-chromecast-title-empty');\n      }\n   },\n\n   /**\n    * Sets the current subtitle and updates the subtitle's DOMElement with the new text.\n    *\n    * @param subtitle {string} a subtitle to show\n    */\n   updateSubtitle: function(subtitle) {\n      var subtitleEl = this._findSubtitleEl();\n\n      this._subtitle = subtitle;\n      if (subtitle) {\n         subtitleEl.innerHTML = subtitle;\n         subtitleEl.classList.remove('vjs-tech-chromecast-subtitle-empty');\n      } else {\n         subtitleEl.classList.add('vjs-tech-chromecast-subtitle-empty');\n      }\n   },\n});\n\nmodule.exports = ChromecastTechUI;\n","/**\n * @license\n * Copyright (c) 2014 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n */\n// @version 0.7.24\n(function() {\n  window.WebComponents = window.WebComponents || {\n    flags: {}\n  };\n  var file = \"webcomponents-lite.js\";\n  var script = document.querySelector('script[src*=\"' + file + '\"]');\n  var flags = {};\n  if (!flags.noOpts) {\n    location.search.slice(1).split(\"&\").forEach(function(option) {\n      var parts = option.split(\"=\");\n      var match;\n      if (parts[0] && (match = parts[0].match(/wc-(.+)/))) {\n        flags[match[1]] = parts[1] || true;\n      }\n    });\n    if (script) {\n      for (var i = 0, a; a = script.attributes[i]; i++) {\n        if (a.name !== \"src\") {\n          flags[a.name] = a.value || true;\n        }\n      }\n    }\n    if (flags.log && flags.log.split) {\n      var parts = flags.log.split(\",\");\n      flags.log = {};\n      parts.forEach(function(f) {\n        flags.log[f] = true;\n      });\n    } else {\n      flags.log = {};\n    }\n  }\n  if (flags.register) {\n    window.CustomElements = window.CustomElements || {\n      flags: {}\n    };\n    window.CustomElements.flags.register = flags.register;\n  }\n  WebComponents.flags = flags;\n})();\n\n(function(scope) {\n  \"use strict\";\n  var hasWorkingUrl = false;\n  if (!scope.forceJURL) {\n    try {\n      var u = new URL(\"b\", \"http://a\");\n      u.pathname = \"c%20d\";\n      hasWorkingUrl = u.href === \"http://a/c%20d\";\n    } catch (e) {}\n  }\n  if (hasWorkingUrl) return;\n  var relative = Object.create(null);\n  relative[\"ftp\"] = 21;\n  relative[\"file\"] = 0;\n  relative[\"gopher\"] = 70;\n  relative[\"http\"] = 80;\n  relative[\"https\"] = 443;\n  relative[\"ws\"] = 80;\n  relative[\"wss\"] = 443;\n  var relativePathDotMapping = Object.create(null);\n  relativePathDotMapping[\"%2e\"] = \".\";\n  relativePathDotMapping[\".%2e\"] = \"..\";\n  relativePathDotMapping[\"%2e.\"] = \"..\";\n  relativePathDotMapping[\"%2e%2e\"] = \"..\";\n  function isRelativeScheme(scheme) {\n    return relative[scheme] !== undefined;\n  }\n  function invalid() {\n    clear.call(this);\n    this._isInvalid = true;\n  }\n  function IDNAToASCII(h) {\n    if (\"\" == h) {\n      invalid.call(this);\n    }\n    return h.toLowerCase();\n  }\n  function percentEscape(c) {\n    var unicode = c.charCodeAt(0);\n    if (unicode > 32 && unicode < 127 && [ 34, 35, 60, 62, 63, 96 ].indexOf(unicode) == -1) {\n      return c;\n    }\n    return encodeURIComponent(c);\n  }\n  function percentEscapeQuery(c) {\n    var unicode = c.charCodeAt(0);\n    if (unicode > 32 && unicode < 127 && [ 34, 35, 60, 62, 96 ].indexOf(unicode) == -1) {\n      return c;\n    }\n    return encodeURIComponent(c);\n  }\n  var EOF = undefined, ALPHA = /[a-zA-Z]/, ALPHANUMERIC = /[a-zA-Z0-9\\+\\-\\.]/;\n  function parse(input, stateOverride, base) {\n    function err(message) {\n      errors.push(message);\n    }\n    var state = stateOverride || \"scheme start\", cursor = 0, buffer = \"\", seenAt = false, seenBracket = false, errors = [];\n    loop: while ((input[cursor - 1] != EOF || cursor == 0) && !this._isInvalid) {\n      var c = input[cursor];\n      switch (state) {\n       case \"scheme start\":\n        if (c && ALPHA.test(c)) {\n          buffer += c.toLowerCase();\n          state = \"scheme\";\n        } else if (!stateOverride) {\n          buffer = \"\";\n          state = \"no scheme\";\n          continue;\n        } else {\n          err(\"Invalid scheme.\");\n          break loop;\n        }\n        break;\n\n       case \"scheme\":\n        if (c && ALPHANUMERIC.test(c)) {\n          buffer += c.toLowerCase();\n        } else if (\":\" == c) {\n          this._scheme = buffer;\n          buffer = \"\";\n          if (stateOverride) {\n            break loop;\n          }\n          if (isRelativeScheme(this._scheme)) {\n            this._isRelative = true;\n          }\n          if (\"file\" == this._scheme) {\n            state = \"relative\";\n          } else if (this._isRelative && base && base._scheme == this._scheme) {\n            state = \"relative or authority\";\n          } else if (this._isRelative) {\n            state = \"authority first slash\";\n          } else {\n            state = \"scheme data\";\n          }\n        } else if (!stateOverride) {\n          buffer = \"\";\n          cursor = 0;\n          state = \"no scheme\";\n          continue;\n        } else if (EOF == c) {\n          break loop;\n        } else {\n          err(\"Code point not allowed in scheme: \" + c);\n          break loop;\n        }\n        break;\n\n       case \"scheme data\":\n        if (\"?\" == c) {\n          this._query = \"?\";\n          state = \"query\";\n        } else if (\"#\" == c) {\n          this._fragment = \"#\";\n          state = \"fragment\";\n        } else {\n          if (EOF != c && \"\\t\" != c && \"\\n\" != c && \"\\r\" != c) {\n            this._schemeData += percentEscape(c);\n          }\n        }\n        break;\n\n       case \"no scheme\":\n        if (!base || !isRelativeScheme(base._scheme)) {\n          err(\"Missing scheme.\");\n          invalid.call(this);\n        } else {\n          state = \"relative\";\n          continue;\n        }\n        break;\n\n       case \"relative or authority\":\n        if (\"/\" == c && \"/\" == input[cursor + 1]) {\n          state = \"authority ignore slashes\";\n        } else {\n          err(\"Expected /, got: \" + c);\n          state = \"relative\";\n          continue;\n        }\n        break;\n\n       case \"relative\":\n        this._isRelative = true;\n        if (\"file\" != this._scheme) this._scheme = base._scheme;\n        if (EOF == c) {\n          this._host = base._host;\n          this._port = base._port;\n          this._path = base._path.slice();\n          this._query = base._query;\n          this._username = base._username;\n          this._password = base._password;\n          break loop;\n        } else if (\"/\" == c || \"\\\\\" == c) {\n          if (\"\\\\\" == c) err(\"\\\\ is an invalid code point.\");\n          state = \"relative slash\";\n        } else if (\"?\" == c) {\n          this._host = base._host;\n          this._port = base._port;\n          this._path = base._path.slice();\n          this._query = \"?\";\n          this._username = base._username;\n          this._password = base._password;\n          state = \"query\";\n        } else if (\"#\" == c) {\n          this._host = base._host;\n          this._port = base._port;\n          this._path = base._path.slice();\n          this._query = base._query;\n          this._fragment = \"#\";\n          this._username = base._username;\n          this._password = base._password;\n          state = \"fragment\";\n        } else {\n          var nextC = input[cursor + 1];\n          var nextNextC = input[cursor + 2];\n          if (\"file\" != this._scheme || !ALPHA.test(c) || nextC != \":\" && nextC != \"|\" || EOF != nextNextC && \"/\" != nextNextC && \"\\\\\" != nextNextC && \"?\" != nextNextC && \"#\" != nextNextC) {\n            this._host = base._host;\n            this._port = base._port;\n            this._username = base._username;\n            this._password = base._password;\n            this._path = base._path.slice();\n            this._path.pop();\n          }\n          state = \"relative path\";\n          continue;\n        }\n        break;\n\n       case \"relative slash\":\n        if (\"/\" == c || \"\\\\\" == c) {\n          if (\"\\\\\" == c) {\n            err(\"\\\\ is an invalid code point.\");\n          }\n          if (\"file\" == this._scheme) {\n            state = \"file host\";\n          } else {\n            state = \"authority ignore slashes\";\n          }\n        } else {\n          if (\"file\" != this._scheme) {\n            this._host = base._host;\n            this._port = base._port;\n            this._username = base._username;\n            this._password = base._password;\n          }\n          state = \"relative path\";\n          continue;\n        }\n        break;\n\n       case \"authority first slash\":\n        if (\"/\" == c) {\n          state = \"authority second slash\";\n        } else {\n          err(\"Expected '/', got: \" + c);\n          state = \"authority ignore slashes\";\n          continue;\n        }\n        break;\n\n       case \"authority second slash\":\n        state = \"authority ignore slashes\";\n        if (\"/\" != c) {\n          err(\"Expected '/', got: \" + c);\n          continue;\n        }\n        break;\n\n       case \"authority ignore slashes\":\n        if (\"/\" != c && \"\\\\\" != c) {\n          state = \"authority\";\n          continue;\n        } else {\n          err(\"Expected authority, got: \" + c);\n        }\n        break;\n\n       case \"authority\":\n        if (\"@\" == c) {\n          if (seenAt) {\n            err(\"@ already seen.\");\n            buffer += \"%40\";\n          }\n          seenAt = true;\n          for (var i = 0; i < buffer.length; i++) {\n            var cp = buffer[i];\n            if (\"\\t\" == cp || \"\\n\" == cp || \"\\r\" == cp) {\n              err(\"Invalid whitespace in authority.\");\n              continue;\n            }\n            if (\":\" == cp && null === this._password) {\n              this._password = \"\";\n              continue;\n            }\n            var tempC = percentEscape(cp);\n            null !== this._password ? this._password += tempC : this._username += tempC;\n          }\n          buffer = \"\";\n        } else if (EOF == c || \"/\" == c || \"\\\\\" == c || \"?\" == c || \"#\" == c) {\n          cursor -= buffer.length;\n          buffer = \"\";\n          state = \"host\";\n          continue;\n        } else {\n          buffer += c;\n        }\n        break;\n\n       case \"file host\":\n        if (EOF == c || \"/\" == c || \"\\\\\" == c || \"?\" == c || \"#\" == c) {\n          if (buffer.length == 2 && ALPHA.test(buffer[0]) && (buffer[1] == \":\" || buffer[1] == \"|\")) {\n            state = \"relative path\";\n          } else if (buffer.length == 0) {\n            state = \"relative path start\";\n          } else {\n            this._host = IDNAToASCII.call(this, buffer);\n            buffer = \"\";\n            state = \"relative path start\";\n          }\n          continue;\n        } else if (\"\\t\" == c || \"\\n\" == c || \"\\r\" == c) {\n          err(\"Invalid whitespace in file host.\");\n        } else {\n          buffer += c;\n        }\n        break;\n\n       case \"host\":\n       case \"hostname\":\n        if (\":\" == c && !seenBracket) {\n          this._host = IDNAToASCII.call(this, buffer);\n          buffer = \"\";\n          state = \"port\";\n          if (\"hostname\" == stateOverride) {\n            break loop;\n          }\n        } else if (EOF == c || \"/\" == c || \"\\\\\" == c || \"?\" == c || \"#\" == c) {\n          this._host = IDNAToASCII.call(this, buffer);\n          buffer = \"\";\n          state = \"relative path start\";\n          if (stateOverride) {\n            break loop;\n          }\n          continue;\n        } else if (\"\\t\" != c && \"\\n\" != c && \"\\r\" != c) {\n          if (\"[\" == c) {\n            seenBracket = true;\n          } else if (\"]\" == c) {\n            seenBracket = false;\n          }\n          buffer += c;\n        } else {\n          err(\"Invalid code point in host/hostname: \" + c);\n        }\n        break;\n\n       case \"port\":\n        if (/[0-9]/.test(c)) {\n          buffer += c;\n        } else if (EOF == c || \"/\" == c || \"\\\\\" == c || \"?\" == c || \"#\" == c || stateOverride) {\n          if (\"\" != buffer) {\n            var temp = parseInt(buffer, 10);\n            if (temp != relative[this._scheme]) {\n              this._port = temp + \"\";\n            }\n            buffer = \"\";\n          }\n          if (stateOverride) {\n            break loop;\n          }\n          state = \"relative path start\";\n          continue;\n        } else if (\"\\t\" == c || \"\\n\" == c || \"\\r\" == c) {\n          err(\"Invalid code point in port: \" + c);\n        } else {\n          invalid.call(this);\n        }\n        break;\n\n       case \"relative path start\":\n        if (\"\\\\\" == c) err(\"'\\\\' not allowed in path.\");\n        state = \"relative path\";\n        if (\"/\" != c && \"\\\\\" != c) {\n          continue;\n        }\n        break;\n\n       case \"relative path\":\n        if (EOF == c || \"/\" == c || \"\\\\\" == c || !stateOverride && (\"?\" == c || \"#\" == c)) {\n          if (\"\\\\\" == c) {\n            err(\"\\\\ not allowed in relative path.\");\n          }\n          var tmp;\n          if (tmp = relativePathDotMapping[buffer.toLowerCase()]) {\n            buffer = tmp;\n          }\n          if (\"..\" == buffer) {\n            this._path.pop();\n            if (\"/\" != c && \"\\\\\" != c) {\n              this._path.push(\"\");\n            }\n          } else if (\".\" == buffer && \"/\" != c && \"\\\\\" != c) {\n            this._path.push(\"\");\n          } else if (\".\" != buffer) {\n            if (\"file\" == this._scheme && this._path.length == 0 && buffer.length == 2 && ALPHA.test(buffer[0]) && buffer[1] == \"|\") {\n              buffer = buffer[0] + \":\";\n            }\n            this._path.push(buffer);\n          }\n          buffer = \"\";\n          if (\"?\" == c) {\n            this._query = \"?\";\n            state = \"query\";\n          } else if (\"#\" == c) {\n            this._fragment = \"#\";\n            state = \"fragment\";\n          }\n        } else if (\"\\t\" != c && \"\\n\" != c && \"\\r\" != c) {\n          buffer += percentEscape(c);\n        }\n        break;\n\n       case \"query\":\n        if (!stateOverride && \"#\" == c) {\n          this._fragment = \"#\";\n          state = \"fragment\";\n        } else if (EOF != c && \"\\t\" != c && \"\\n\" != c && \"\\r\" != c) {\n          this._query += percentEscapeQuery(c);\n        }\n        break;\n\n       case \"fragment\":\n        if (EOF != c && \"\\t\" != c && \"\\n\" != c && \"\\r\" != c) {\n          this._fragment += c;\n        }\n        break;\n      }\n      cursor++;\n    }\n  }\n  function clear() {\n    this._scheme = \"\";\n    this._schemeData = \"\";\n    this._username = \"\";\n    this._password = null;\n    this._host = \"\";\n    this._port = \"\";\n    this._path = [];\n    this._query = \"\";\n    this._fragment = \"\";\n    this._isInvalid = false;\n    this._isRelative = false;\n  }\n  function jURL(url, base) {\n    if (base !== undefined && !(base instanceof jURL)) base = new jURL(String(base));\n    this._url = url;\n    clear.call(this);\n    var input = url.replace(/^[ \\t\\r\\n\\f]+|[ \\t\\r\\n\\f]+$/g, \"\");\n    parse.call(this, input, null, base);\n  }\n  jURL.prototype = {\n    toString: function() {\n      return this.href;\n    },\n    get href() {\n      if (this._isInvalid) return this._url;\n      var authority = \"\";\n      if (\"\" != this._username || null != this._password) {\n        authority = this._username + (null != this._password ? \":\" + this._password : \"\") + \"@\";\n      }\n      return this.protocol + (this._isRelative ? \"//\" + authority + this.host : \"\") + this.pathname + this._query + this._fragment;\n    },\n    set href(href) {\n      clear.call(this);\n      parse.call(this, href);\n    },\n    get protocol() {\n      return this._scheme + \":\";\n    },\n    set protocol(protocol) {\n      if (this._isInvalid) return;\n      parse.call(this, protocol + \":\", \"scheme start\");\n    },\n    get host() {\n      return this._isInvalid ? \"\" : this._port ? this._host + \":\" + this._port : this._host;\n    },\n    set host(host) {\n      if (this._isInvalid || !this._isRelative) return;\n      parse.call(this, host, \"host\");\n    },\n    get hostname() {\n      return this._host;\n    },\n    set hostname(hostname) {\n      if (this._isInvalid || !this._isRelative) return;\n      parse.call(this, hostname, \"hostname\");\n    },\n    get port() {\n      return this._port;\n    },\n    set port(port) {\n      if (this._isInvalid || !this._isRelative) return;\n      parse.call(this, port, \"port\");\n    },\n    get pathname() {\n      return this._isInvalid ? \"\" : this._isRelative ? \"/\" + this._path.join(\"/\") : this._schemeData;\n    },\n    set pathname(pathname) {\n      if (this._isInvalid || !this._isRelative) return;\n      this._path = [];\n      parse.call(this, pathname, \"relative path start\");\n    },\n    get search() {\n      return this._isInvalid || !this._query || \"?\" == this._query ? \"\" : this._query;\n    },\n    set search(search) {\n      if (this._isInvalid || !this._isRelative) return;\n      this._query = \"?\";\n      if (\"?\" == search[0]) search = search.slice(1);\n      parse.call(this, search, \"query\");\n    },\n    get hash() {\n      return this._isInvalid || !this._fragment || \"#\" == this._fragment ? \"\" : this._fragment;\n    },\n    set hash(hash) {\n      if (this._isInvalid) return;\n      this._fragment = \"#\";\n      if (\"#\" == hash[0]) hash = hash.slice(1);\n      parse.call(this, hash, \"fragment\");\n    },\n    get origin() {\n      var host;\n      if (this._isInvalid || !this._scheme) {\n        return \"\";\n      }\n      switch (this._scheme) {\n       case \"data\":\n       case \"file\":\n       case \"javascript\":\n       case \"mailto\":\n        return \"null\";\n      }\n      host = this.host;\n      if (!host) {\n        return \"\";\n      }\n      return this._scheme + \"://\" + host;\n    }\n  };\n  var OriginalURL = scope.URL;\n  if (OriginalURL) {\n    jURL.createObjectURL = function(blob) {\n      return OriginalURL.createObjectURL.apply(OriginalURL, arguments);\n    };\n    jURL.revokeObjectURL = function(url) {\n      OriginalURL.revokeObjectURL(url);\n    };\n  }\n  scope.URL = jURL;\n})(self);\n\nif (typeof WeakMap === \"undefined\") {\n  (function() {\n    var defineProperty = Object.defineProperty;\n    var counter = Date.now() % 1e9;\n    var WeakMap = function() {\n      this.name = \"__st\" + (Math.random() * 1e9 >>> 0) + (counter++ + \"__\");\n    };\n    WeakMap.prototype = {\n      set: function(key, value) {\n        var entry = key[this.name];\n        if (entry && entry[0] === key) entry[1] = value; else defineProperty(key, this.name, {\n          value: [ key, value ],\n          writable: true\n        });\n        return this;\n      },\n      get: function(key) {\n        var entry;\n        return (entry = key[this.name]) && entry[0] === key ? entry[1] : undefined;\n      },\n      \"delete\": function(key) {\n        var entry = key[this.name];\n        if (!entry || entry[0] !== key) return false;\n        entry[0] = entry[1] = undefined;\n        return true;\n      },\n      has: function(key) {\n        var entry = key[this.name];\n        if (!entry) return false;\n        return entry[0] === key;\n      }\n    };\n    window.WeakMap = WeakMap;\n  })();\n}\n\n(function(global) {\n  if (global.JsMutationObserver) {\n    return;\n  }\n  var registrationsTable = new WeakMap();\n  var setImmediate;\n  if (/Trident|Edge/.test(navigator.userAgent)) {\n    setImmediate = setTimeout;\n  } else if (window.setImmediate) {\n    setImmediate = window.setImmediate;\n  } else {\n    var setImmediateQueue = [];\n    var sentinel = String(Math.random());\n    window.addEventListener(\"message\", function(e) {\n      if (e.data === sentinel) {\n        var queue = setImmediateQueue;\n        setImmediateQueue = [];\n        queue.forEach(function(func) {\n          func();\n        });\n      }\n    });\n    setImmediate = function(func) {\n      setImmediateQueue.push(func);\n      window.postMessage(sentinel, \"*\");\n    };\n  }\n  var isScheduled = false;\n  var scheduledObservers = [];\n  function scheduleCallback(observer) {\n    scheduledObservers.push(observer);\n    if (!isScheduled) {\n      isScheduled = true;\n      setImmediate(dispatchCallbacks);\n    }\n  }\n  function wrapIfNeeded(node) {\n    return window.ShadowDOMPolyfill && window.ShadowDOMPolyfill.wrapIfNeeded(node) || node;\n  }\n  function dispatchCallbacks() {\n    isScheduled = false;\n    var observers = scheduledObservers;\n    scheduledObservers = [];\n    observers.sort(function(o1, o2) {\n      return o1.uid_ - o2.uid_;\n    });\n    var anyNonEmpty = false;\n    observers.forEach(function(observer) {\n      var queue = observer.takeRecords();\n      removeTransientObserversFor(observer);\n      if (queue.length) {\n        observer.callback_(queue, observer);\n        anyNonEmpty = true;\n      }\n    });\n    if (anyNonEmpty) dispatchCallbacks();\n  }\n  function removeTransientObserversFor(observer) {\n    observer.nodes_.forEach(function(node) {\n      var registrations = registrationsTable.get(node);\n      if (!registrations) return;\n      registrations.forEach(function(registration) {\n        if (registration.observer === observer) registration.removeTransientObservers();\n      });\n    });\n  }\n  function forEachAncestorAndObserverEnqueueRecord(target, callback) {\n    for (var node = target; node; node = node.parentNode) {\n      var registrations = registrationsTable.get(node);\n      if (registrations) {\n        for (var j = 0; j < registrations.length; j++) {\n          var registration = registrations[j];\n          var options = registration.options;\n          if (node !== target && !options.subtree) continue;\n          var record = callback(options);\n          if (record) registration.enqueue(record);\n        }\n      }\n    }\n  }\n  var uidCounter = 0;\n  function JsMutationObserver(callback) {\n    this.callback_ = callback;\n    this.nodes_ = [];\n    this.records_ = [];\n    this.uid_ = ++uidCounter;\n  }\n  JsMutationObserver.prototype = {\n    observe: function(target, options) {\n      target = wrapIfNeeded(target);\n      if (!options.childList && !options.attributes && !options.characterData || options.attributeOldValue && !options.attributes || options.attributeFilter && options.attributeFilter.length && !options.attributes || options.characterDataOldValue && !options.characterData) {\n        throw new SyntaxError();\n      }\n      var registrations = registrationsTable.get(target);\n      if (!registrations) registrationsTable.set(target, registrations = []);\n      var registration;\n      for (var i = 0; i < registrations.length; i++) {\n        if (registrations[i].observer === this) {\n          registration = registrations[i];\n          registration.removeListeners();\n          registration.options = options;\n          break;\n        }\n      }\n      if (!registration) {\n        registration = new Registration(this, target, options);\n        registrations.push(registration);\n        this.nodes_.push(target);\n      }\n      registration.addListeners();\n    },\n    disconnect: function() {\n      this.nodes_.forEach(function(node) {\n        var registrations = registrationsTable.get(node);\n        for (var i = 0; i < registrations.length; i++) {\n          var registration = registrations[i];\n          if (registration.observer === this) {\n            registration.removeListeners();\n            registrations.splice(i, 1);\n            break;\n          }\n        }\n      }, this);\n      this.records_ = [];\n    },\n    takeRecords: function() {\n      var copyOfRecords = this.records_;\n      this.records_ = [];\n      return copyOfRecords;\n    }\n  };\n  function MutationRecord(type, target) {\n    this.type = type;\n    this.target = target;\n    this.addedNodes = [];\n    this.removedNodes = [];\n    this.previousSibling = null;\n    this.nextSibling = null;\n    this.attributeName = null;\n    this.attributeNamespace = null;\n    this.oldValue = null;\n  }\n  function copyMutationRecord(original) {\n    var record = new MutationRecord(original.type, original.target);\n    record.addedNodes = original.addedNodes.slice();\n    record.removedNodes = original.removedNodes.slice();\n    record.previousSibling = original.previousSibling;\n    record.nextSibling = original.nextSibling;\n    record.attributeName = original.attributeName;\n    record.attributeNamespace = original.attributeNamespace;\n    record.oldValue = original.oldValue;\n    return record;\n  }\n  var currentRecord, recordWithOldValue;\n  function getRecord(type, target) {\n    return currentRecord = new MutationRecord(type, target);\n  }\n  function getRecordWithOldValue(oldValue) {\n    if (recordWithOldValue) return recordWithOldValue;\n    recordWithOldValue = copyMutationRecord(currentRecord);\n    recordWithOldValue.oldValue = oldValue;\n    return recordWithOldValue;\n  }\n  function clearRecords() {\n    currentRecord = recordWithOldValue = undefined;\n  }\n  function recordRepresentsCurrentMutation(record) {\n    return record === recordWithOldValue || record === currentRecord;\n  }\n  function selectRecord(lastRecord, newRecord) {\n    if (lastRecord === newRecord) return lastRecord;\n    if (recordWithOldValue && recordRepresentsCurrentMutation(lastRecord)) return recordWithOldValue;\n    return null;\n  }\n  function Registration(observer, target, options) {\n    this.observer = observer;\n    this.target = target;\n    this.options = options;\n    this.transientObservedNodes = [];\n  }\n  Registration.prototype = {\n    enqueue: function(record) {\n      var records = this.observer.records_;\n      var length = records.length;\n      if (records.length > 0) {\n        var lastRecord = records[length - 1];\n        var recordToReplaceLast = selectRecord(lastRecord, record);\n        if (recordToReplaceLast) {\n          records[length - 1] = recordToReplaceLast;\n          return;\n        }\n      } else {\n        scheduleCallback(this.observer);\n      }\n      records[length] = record;\n    },\n    addListeners: function() {\n      this.addListeners_(this.target);\n    },\n    addListeners_: function(node) {\n      var options = this.options;\n      if (options.attributes) node.addEventListener(\"DOMAttrModified\", this, true);\n      if (options.characterData) node.addEventListener(\"DOMCharacterDataModified\", this, true);\n      if (options.childList) node.addEventListener(\"DOMNodeInserted\", this, true);\n      if (options.childList || options.subtree) node.addEventListener(\"DOMNodeRemoved\", this, true);\n    },\n    removeListeners: function() {\n      this.removeListeners_(this.target);\n    },\n    removeListeners_: function(node) {\n      var options = this.options;\n      if (options.attributes) node.removeEventListener(\"DOMAttrModified\", this, true);\n      if (options.characterData) node.removeEventListener(\"DOMCharacterDataModified\", this, true);\n      if (options.childList) node.removeEventListener(\"DOMNodeInserted\", this, true);\n      if (options.childList || options.subtree) node.removeEventListener(\"DOMNodeRemoved\", this, true);\n    },\n    addTransientObserver: function(node) {\n      if (node === this.target) return;\n      this.addListeners_(node);\n      this.transientObservedNodes.push(node);\n      var registrations = registrationsTable.get(node);\n      if (!registrations) registrationsTable.set(node, registrations = []);\n      registrations.push(this);\n    },\n    removeTransientObservers: function() {\n      var transientObservedNodes = this.transientObservedNodes;\n      this.transientObservedNodes = [];\n      transientObservedNodes.forEach(function(node) {\n        this.removeListeners_(node);\n        var registrations = registrationsTable.get(node);\n        for (var i = 0; i < registrations.length; i++) {\n          if (registrations[i] === this) {\n            registrations.splice(i, 1);\n            break;\n          }\n        }\n      }, this);\n    },\n    handleEvent: function(e) {\n      e.stopImmediatePropagation();\n      switch (e.type) {\n       case \"DOMAttrModified\":\n        var name = e.attrName;\n        var namespace = e.relatedNode.namespaceURI;\n        var target = e.target;\n        var record = new getRecord(\"attributes\", target);\n        record.attributeName = name;\n        record.attributeNamespace = namespace;\n        var oldValue = e.attrChange === MutationEvent.ADDITION ? null : e.prevValue;\n        forEachAncestorAndObserverEnqueueRecord(target, function(options) {\n          if (!options.attributes) return;\n          if (options.attributeFilter && options.attributeFilter.length && options.attributeFilter.indexOf(name) === -1 && options.attributeFilter.indexOf(namespace) === -1) {\n            return;\n          }\n          if (options.attributeOldValue) return getRecordWithOldValue(oldValue);\n          return record;\n        });\n        break;\n\n       case \"DOMCharacterDataModified\":\n        var target = e.target;\n        var record = getRecord(\"characterData\", target);\n        var oldValue = e.prevValue;\n        forEachAncestorAndObserverEnqueueRecord(target, function(options) {\n          if (!options.characterData) return;\n          if (options.characterDataOldValue) return getRecordWithOldValue(oldValue);\n          return record;\n        });\n        break;\n\n       case \"DOMNodeRemoved\":\n        this.addTransientObserver(e.target);\n\n       case \"DOMNodeInserted\":\n        var changedNode = e.target;\n        var addedNodes, removedNodes;\n        if (e.type === \"DOMNodeInserted\") {\n          addedNodes = [ changedNode ];\n          removedNodes = [];\n        } else {\n          addedNodes = [];\n          removedNodes = [ changedNode ];\n        }\n        var previousSibling = changedNode.previousSibling;\n        var nextSibling = changedNode.nextSibling;\n        var record = getRecord(\"childList\", e.target.parentNode);\n        record.addedNodes = addedNodes;\n        record.removedNodes = removedNodes;\n        record.previousSibling = previousSibling;\n        record.nextSibling = nextSibling;\n        forEachAncestorAndObserverEnqueueRecord(e.relatedNode, function(options) {\n          if (!options.childList) return;\n          return record;\n        });\n      }\n      clearRecords();\n    }\n  };\n  global.JsMutationObserver = JsMutationObserver;\n  if (!global.MutationObserver) {\n    global.MutationObserver = JsMutationObserver;\n    JsMutationObserver._isPolyfilled = true;\n  }\n})(self);\n\n(function() {\n  var needsTemplate = typeof HTMLTemplateElement === \"undefined\";\n  if (/Trident/.test(navigator.userAgent)) {\n    (function() {\n      var importNode = document.importNode;\n      document.importNode = function() {\n        var n = importNode.apply(document, arguments);\n        if (n.nodeType === Node.DOCUMENT_FRAGMENT_NODE) {\n          var f = document.createDocumentFragment();\n          f.appendChild(n);\n          return f;\n        } else {\n          return n;\n        }\n      };\n    })();\n  }\n  var needsCloning = function() {\n    if (!needsTemplate) {\n      var t = document.createElement(\"template\");\n      var t2 = document.createElement(\"template\");\n      t2.content.appendChild(document.createElement(\"div\"));\n      t.content.appendChild(t2);\n      var clone = t.cloneNode(true);\n      return clone.content.childNodes.length === 0 || clone.content.firstChild.content.childNodes.length === 0;\n    }\n  }();\n  var TEMPLATE_TAG = \"template\";\n  var TemplateImpl = function() {};\n  if (needsTemplate) {\n    var contentDoc = document.implementation.createHTMLDocument(\"template\");\n    var canDecorate = true;\n    var templateStyle = document.createElement(\"style\");\n    templateStyle.textContent = TEMPLATE_TAG + \"{display:none;}\";\n    var head = document.head;\n    head.insertBefore(templateStyle, head.firstElementChild);\n    TemplateImpl.prototype = Object.create(HTMLElement.prototype);\n    TemplateImpl.decorate = function(template) {\n      if (template.content) {\n        return;\n      }\n      template.content = contentDoc.createDocumentFragment();\n      var child;\n      while (child = template.firstChild) {\n        template.content.appendChild(child);\n      }\n      template.cloneNode = function(deep) {\n        return TemplateImpl.cloneNode(this, deep);\n      };\n      if (canDecorate) {\n        try {\n          Object.defineProperty(template, \"innerHTML\", {\n            get: function() {\n              var o = \"\";\n              for (var e = this.content.firstChild; e; e = e.nextSibling) {\n                o += e.outerHTML || escapeData(e.data);\n              }\n              return o;\n            },\n            set: function(text) {\n              contentDoc.body.innerHTML = text;\n              TemplateImpl.bootstrap(contentDoc);\n              while (this.content.firstChild) {\n                this.content.removeChild(this.content.firstChild);\n              }\n              while (contentDoc.body.firstChild) {\n                this.content.appendChild(contentDoc.body.firstChild);\n              }\n            },\n            configurable: true\n          });\n        } catch (err) {\n          canDecorate = false;\n        }\n      }\n      TemplateImpl.bootstrap(template.content);\n    };\n    TemplateImpl.bootstrap = function(doc) {\n      var templates = doc.querySelectorAll(TEMPLATE_TAG);\n      for (var i = 0, l = templates.length, t; i < l && (t = templates[i]); i++) {\n        TemplateImpl.decorate(t);\n      }\n    };\n    document.addEventListener(\"DOMContentLoaded\", function() {\n      TemplateImpl.bootstrap(document);\n    });\n    var createElement = document.createElement;\n    document.createElement = function() {\n      \"use strict\";\n      var el = createElement.apply(document, arguments);\n      if (el.localName === \"template\") {\n        TemplateImpl.decorate(el);\n      }\n      return el;\n    };\n    var escapeDataRegExp = /[&\\u00A0<>]/g;\n    function escapeReplace(c) {\n      switch (c) {\n       case \"&\":\n        return \"&amp;\";\n\n       case \"<\":\n        return \"&lt;\";\n\n       case \">\":\n        return \"&gt;\";\n\n       case \"\":\n        return \"&nbsp;\";\n      }\n    }\n    function escapeData(s) {\n      return s.replace(escapeDataRegExp, escapeReplace);\n    }\n  }\n  if (needsTemplate || needsCloning) {\n    var nativeCloneNode = Node.prototype.cloneNode;\n    TemplateImpl.cloneNode = function(template, deep) {\n      var clone = nativeCloneNode.call(template, false);\n      if (this.decorate) {\n        this.decorate(clone);\n      }\n      if (deep) {\n        clone.content.appendChild(nativeCloneNode.call(template.content, true));\n        this.fixClonedDom(clone.content, template.content);\n      }\n      return clone;\n    };\n    TemplateImpl.fixClonedDom = function(clone, source) {\n      if (!source.querySelectorAll) return;\n      var s$ = source.querySelectorAll(TEMPLATE_TAG);\n      var t$ = clone.querySelectorAll(TEMPLATE_TAG);\n      for (var i = 0, l = t$.length, t, s; i < l; i++) {\n        s = s$[i];\n        t = t$[i];\n        if (this.decorate) {\n          this.decorate(s);\n        }\n        t.parentNode.replaceChild(s.cloneNode(true), t);\n      }\n    };\n    var originalImportNode = document.importNode;\n    Node.prototype.cloneNode = function(deep) {\n      var dom = nativeCloneNode.call(this, deep);\n      if (deep) {\n        TemplateImpl.fixClonedDom(dom, this);\n      }\n      return dom;\n    };\n    document.importNode = function(element, deep) {\n      if (element.localName === TEMPLATE_TAG) {\n        return TemplateImpl.cloneNode(element, deep);\n      } else {\n        var dom = originalImportNode.call(document, element, deep);\n        if (deep) {\n          TemplateImpl.fixClonedDom(dom, element);\n        }\n        return dom;\n      }\n    };\n    if (needsCloning) {\n      HTMLTemplateElement.prototype.cloneNode = function(deep) {\n        return TemplateImpl.cloneNode(this, deep);\n      };\n    }\n  }\n  if (needsTemplate) {\n    window.HTMLTemplateElement = TemplateImpl;\n  }\n})();\n\n(function(scope) {\n  \"use strict\";\n  if (!(window.performance && window.performance.now)) {\n    var start = Date.now();\n    window.performance = {\n      now: function() {\n        return Date.now() - start;\n      }\n    };\n  }\n  if (!window.requestAnimationFrame) {\n    window.requestAnimationFrame = function() {\n      var nativeRaf = window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame;\n      return nativeRaf ? function(callback) {\n        return nativeRaf(function() {\n          callback(performance.now());\n        });\n      } : function(callback) {\n        return window.setTimeout(callback, 1e3 / 60);\n      };\n    }();\n  }\n  if (!window.cancelAnimationFrame) {\n    window.cancelAnimationFrame = function() {\n      return window.webkitCancelAnimationFrame || window.mozCancelAnimationFrame || function(id) {\n        clearTimeout(id);\n      };\n    }();\n  }\n  var workingDefaultPrevented = function() {\n    var e = document.createEvent(\"Event\");\n    e.initEvent(\"foo\", true, true);\n    e.preventDefault();\n    return e.defaultPrevented;\n  }();\n  if (!workingDefaultPrevented) {\n    var origPreventDefault = Event.prototype.preventDefault;\n    Event.prototype.preventDefault = function() {\n      if (!this.cancelable) {\n        return;\n      }\n      origPreventDefault.call(this);\n      Object.defineProperty(this, \"defaultPrevented\", {\n        get: function() {\n          return true;\n        },\n        configurable: true\n      });\n    };\n  }\n  var isIE = /Trident/.test(navigator.userAgent);\n  if (!window.CustomEvent || isIE && typeof window.CustomEvent !== \"function\") {\n    window.CustomEvent = function(inType, params) {\n      params = params || {};\n      var e = document.createEvent(\"CustomEvent\");\n      e.initCustomEvent(inType, Boolean(params.bubbles), Boolean(params.cancelable), params.detail);\n      return e;\n    };\n    window.CustomEvent.prototype = window.Event.prototype;\n  }\n  if (!window.Event || isIE && typeof window.Event !== \"function\") {\n    var origEvent = window.Event;\n    window.Event = function(inType, params) {\n      params = params || {};\n      var e = document.createEvent(\"Event\");\n      e.initEvent(inType, Boolean(params.bubbles), Boolean(params.cancelable));\n      return e;\n    };\n    window.Event.prototype = origEvent.prototype;\n  }\n})(window.WebComponents);\n\nwindow.HTMLImports = window.HTMLImports || {\n  flags: {}\n};\n\n(function(scope) {\n  var IMPORT_LINK_TYPE = \"import\";\n  var useNative = Boolean(IMPORT_LINK_TYPE in document.createElement(\"link\"));\n  var hasShadowDOMPolyfill = Boolean(window.ShadowDOMPolyfill);\n  var wrap = function(node) {\n    return hasShadowDOMPolyfill ? window.ShadowDOMPolyfill.wrapIfNeeded(node) : node;\n  };\n  var rootDocument = wrap(document);\n  var currentScriptDescriptor = {\n    get: function() {\n      var script = window.HTMLImports.currentScript || document.currentScript || (document.readyState !== \"complete\" ? document.scripts[document.scripts.length - 1] : null);\n      return wrap(script);\n    },\n    configurable: true\n  };\n  Object.defineProperty(document, \"_currentScript\", currentScriptDescriptor);\n  Object.defineProperty(rootDocument, \"_currentScript\", currentScriptDescriptor);\n  var isIE = /Trident/.test(navigator.userAgent);\n  function whenReady(callback, doc) {\n    doc = doc || rootDocument;\n    whenDocumentReady(function() {\n      watchImportsLoad(callback, doc);\n    }, doc);\n  }\n  var requiredReadyState = isIE ? \"complete\" : \"interactive\";\n  var READY_EVENT = \"readystatechange\";\n  function isDocumentReady(doc) {\n    return doc.readyState === \"complete\" || doc.readyState === requiredReadyState;\n  }\n  function whenDocumentReady(callback, doc) {\n    if (!isDocumentReady(doc)) {\n      var checkReady = function() {\n        if (doc.readyState === \"complete\" || doc.readyState === requiredReadyState) {\n          doc.removeEventListener(READY_EVENT, checkReady);\n          whenDocumentReady(callback, doc);\n        }\n      };\n      doc.addEventListener(READY_EVENT, checkReady);\n    } else if (callback) {\n      callback();\n    }\n  }\n  function markTargetLoaded(event) {\n    event.target.__loaded = true;\n  }\n  function watchImportsLoad(callback, doc) {\n    var imports = doc.querySelectorAll(\"link[rel=import]\");\n    var parsedCount = 0, importCount = imports.length, newImports = [], errorImports = [];\n    function checkDone() {\n      if (parsedCount == importCount && callback) {\n        callback({\n          allImports: imports,\n          loadedImports: newImports,\n          errorImports: errorImports\n        });\n      }\n    }\n    function loadedImport(e) {\n      markTargetLoaded(e);\n      newImports.push(this);\n      parsedCount++;\n      checkDone();\n    }\n    function errorLoadingImport(e) {\n      errorImports.push(this);\n      parsedCount++;\n      checkDone();\n    }\n    if (importCount) {\n      for (var i = 0, imp; i < importCount && (imp = imports[i]); i++) {\n        if (isImportLoaded(imp)) {\n          newImports.push(this);\n          parsedCount++;\n          checkDone();\n        } else {\n          imp.addEventListener(\"load\", loadedImport);\n          imp.addEventListener(\"error\", errorLoadingImport);\n        }\n      }\n    } else {\n      checkDone();\n    }\n  }\n  function isImportLoaded(link) {\n    return useNative ? link.__loaded || link.import && link.import.readyState !== \"loading\" : link.__importParsed;\n  }\n  if (useNative) {\n    new MutationObserver(function(mxns) {\n      for (var i = 0, l = mxns.length, m; i < l && (m = mxns[i]); i++) {\n        if (m.addedNodes) {\n          handleImports(m.addedNodes);\n        }\n      }\n    }).observe(document.head, {\n      childList: true\n    });\n    function handleImports(nodes) {\n      for (var i = 0, l = nodes.length, n; i < l && (n = nodes[i]); i++) {\n        if (isImport(n)) {\n          handleImport(n);\n        }\n      }\n    }\n    function isImport(element) {\n      return element.localName === \"link\" && element.rel === \"import\";\n    }\n    function handleImport(element) {\n      var loaded = element.import;\n      if (loaded) {\n        markTargetLoaded({\n          target: element\n        });\n      } else {\n        element.addEventListener(\"load\", markTargetLoaded);\n        element.addEventListener(\"error\", markTargetLoaded);\n      }\n    }\n    (function() {\n      if (document.readyState === \"loading\") {\n        var imports = document.querySelectorAll(\"link[rel=import]\");\n        for (var i = 0, l = imports.length, imp; i < l && (imp = imports[i]); i++) {\n          handleImport(imp);\n        }\n      }\n    })();\n  }\n  whenReady(function(detail) {\n    window.HTMLImports.ready = true;\n    window.HTMLImports.readyTime = new Date().getTime();\n    var evt = rootDocument.createEvent(\"CustomEvent\");\n    evt.initCustomEvent(\"HTMLImportsLoaded\", true, true, detail);\n    rootDocument.dispatchEvent(evt);\n  });\n  scope.IMPORT_LINK_TYPE = IMPORT_LINK_TYPE;\n  scope.useNative = useNative;\n  scope.rootDocument = rootDocument;\n  scope.whenReady = whenReady;\n  scope.isIE = isIE;\n})(window.HTMLImports);\n\n(function(scope) {\n  var modules = [];\n  var addModule = function(module) {\n    modules.push(module);\n  };\n  var initializeModules = function() {\n    modules.forEach(function(module) {\n      module(scope);\n    });\n  };\n  scope.addModule = addModule;\n  scope.initializeModules = initializeModules;\n})(window.HTMLImports);\n\nwindow.HTMLImports.addModule(function(scope) {\n  var CSS_URL_REGEXP = /(url\\()([^)]*)(\\))/g;\n  var CSS_IMPORT_REGEXP = /(@import[\\s]+(?!url\\())([^;]*)(;)/g;\n  var path = {\n    resolveUrlsInStyle: function(style, linkUrl) {\n      var doc = style.ownerDocument;\n      var resolver = doc.createElement(\"a\");\n      style.textContent = this.resolveUrlsInCssText(style.textContent, linkUrl, resolver);\n      return style;\n    },\n    resolveUrlsInCssText: function(cssText, linkUrl, urlObj) {\n      var r = this.replaceUrls(cssText, urlObj, linkUrl, CSS_URL_REGEXP);\n      r = this.replaceUrls(r, urlObj, linkUrl, CSS_IMPORT_REGEXP);\n      return r;\n    },\n    replaceUrls: function(text, urlObj, linkUrl, regexp) {\n      return text.replace(regexp, function(m, pre, url, post) {\n        var urlPath = url.replace(/[\"']/g, \"\");\n        if (linkUrl) {\n          urlPath = new URL(urlPath, linkUrl).href;\n        }\n        urlObj.href = urlPath;\n        urlPath = urlObj.href;\n        return pre + \"'\" + urlPath + \"'\" + post;\n      });\n    }\n  };\n  scope.path = path;\n});\n\nwindow.HTMLImports.addModule(function(scope) {\n  var xhr = {\n    async: true,\n    ok: function(request) {\n      return request.status >= 200 && request.status < 300 || request.status === 304 || request.status === 0;\n    },\n    load: function(url, next, nextContext) {\n      var request = new XMLHttpRequest();\n      if (scope.flags.debug || scope.flags.bust) {\n        url += \"?\" + Math.random();\n      }\n      request.open(\"GET\", url, xhr.async);\n      request.addEventListener(\"readystatechange\", function(e) {\n        if (request.readyState === 4) {\n          var redirectedUrl = null;\n          try {\n            var locationHeader = request.getResponseHeader(\"Location\");\n            if (locationHeader) {\n              redirectedUrl = locationHeader.substr(0, 1) === \"/\" ? location.origin + locationHeader : locationHeader;\n            }\n          } catch (e) {\n            console.error(e.message);\n          }\n          next.call(nextContext, !xhr.ok(request) && request, request.response || request.responseText, redirectedUrl);\n        }\n      });\n      request.send();\n      return request;\n    },\n    loadDocument: function(url, next, nextContext) {\n      this.load(url, next, nextContext).responseType = \"document\";\n    }\n  };\n  scope.xhr = xhr;\n});\n\nwindow.HTMLImports.addModule(function(scope) {\n  var xhr = scope.xhr;\n  var flags = scope.flags;\n  var Loader = function(onLoad, onComplete) {\n    this.cache = {};\n    this.onload = onLoad;\n    this.oncomplete = onComplete;\n    this.inflight = 0;\n    this.pending = {};\n  };\n  Loader.prototype = {\n    addNodes: function(nodes) {\n      this.inflight += nodes.length;\n      for (var i = 0, l = nodes.length, n; i < l && (n = nodes[i]); i++) {\n        this.require(n);\n      }\n      this.checkDone();\n    },\n    addNode: function(node) {\n      this.inflight++;\n      this.require(node);\n      this.checkDone();\n    },\n    require: function(elt) {\n      var url = elt.src || elt.href;\n      elt.__nodeUrl = url;\n      if (!this.dedupe(url, elt)) {\n        this.fetch(url, elt);\n      }\n    },\n    dedupe: function(url, elt) {\n      if (this.pending[url]) {\n        this.pending[url].push(elt);\n        return true;\n      }\n      var resource;\n      if (this.cache[url]) {\n        this.onload(url, elt, this.cache[url]);\n        this.tail();\n        return true;\n      }\n      this.pending[url] = [ elt ];\n      return false;\n    },\n    fetch: function(url, elt) {\n      flags.load && console.log(\"fetch\", url, elt);\n      if (!url) {\n        setTimeout(function() {\n          this.receive(url, elt, {\n            error: \"href must be specified\"\n          }, null);\n        }.bind(this), 0);\n      } else if (url.match(/^data:/)) {\n        var pieces = url.split(\",\");\n        var header = pieces[0];\n        var body = pieces[1];\n        if (header.indexOf(\";base64\") > -1) {\n          body = atob(body);\n        } else {\n          body = decodeURIComponent(body);\n        }\n        setTimeout(function() {\n          this.receive(url, elt, null, body);\n        }.bind(this), 0);\n      } else {\n        var receiveXhr = function(err, resource, redirectedUrl) {\n          this.receive(url, elt, err, resource, redirectedUrl);\n        }.bind(this);\n        xhr.load(url, receiveXhr);\n      }\n    },\n    receive: function(url, elt, err, resource, redirectedUrl) {\n      this.cache[url] = resource;\n      var $p = this.pending[url];\n      for (var i = 0, l = $p.length, p; i < l && (p = $p[i]); i++) {\n        this.onload(url, p, resource, err, redirectedUrl);\n        this.tail();\n      }\n      this.pending[url] = null;\n    },\n    tail: function() {\n      --this.inflight;\n      this.checkDone();\n    },\n    checkDone: function() {\n      if (!this.inflight) {\n        this.oncomplete();\n      }\n    }\n  };\n  scope.Loader = Loader;\n});\n\nwindow.HTMLImports.addModule(function(scope) {\n  var Observer = function(addCallback) {\n    this.addCallback = addCallback;\n    this.mo = new MutationObserver(this.handler.bind(this));\n  };\n  Observer.prototype = {\n    handler: function(mutations) {\n      for (var i = 0, l = mutations.length, m; i < l && (m = mutations[i]); i++) {\n        if (m.type === \"childList\" && m.addedNodes.length) {\n          this.addedNodes(m.addedNodes);\n        }\n      }\n    },\n    addedNodes: function(nodes) {\n      if (this.addCallback) {\n        this.addCallback(nodes);\n      }\n      for (var i = 0, l = nodes.length, n, loading; i < l && (n = nodes[i]); i++) {\n        if (n.children && n.children.length) {\n          this.addedNodes(n.children);\n        }\n      }\n    },\n    observe: function(root) {\n      this.mo.observe(root, {\n        childList: true,\n        subtree: true\n      });\n    }\n  };\n  scope.Observer = Observer;\n});\n\nwindow.HTMLImports.addModule(function(scope) {\n  var path = scope.path;\n  var rootDocument = scope.rootDocument;\n  var flags = scope.flags;\n  var isIE = scope.isIE;\n  var IMPORT_LINK_TYPE = scope.IMPORT_LINK_TYPE;\n  var IMPORT_SELECTOR = \"link[rel=\" + IMPORT_LINK_TYPE + \"]\";\n  var importParser = {\n    documentSelectors: IMPORT_SELECTOR,\n    importsSelectors: [ IMPORT_SELECTOR, \"link[rel=stylesheet]:not([type])\", \"style:not([type])\", \"script:not([type])\", 'script[type=\"application/javascript\"]', 'script[type=\"text/javascript\"]' ].join(\",\"),\n    map: {\n      link: \"parseLink\",\n      script: \"parseScript\",\n      style: \"parseStyle\"\n    },\n    dynamicElements: [],\n    parseNext: function() {\n      var next = this.nextToParse();\n      if (next) {\n        this.parse(next);\n      }\n    },\n    parse: function(elt) {\n      if (this.isParsed(elt)) {\n        flags.parse && console.log(\"[%s] is already parsed\", elt.localName);\n        return;\n      }\n      var fn = this[this.map[elt.localName]];\n      if (fn) {\n        this.markParsing(elt);\n        fn.call(this, elt);\n      }\n    },\n    parseDynamic: function(elt, quiet) {\n      this.dynamicElements.push(elt);\n      if (!quiet) {\n        this.parseNext();\n      }\n    },\n    markParsing: function(elt) {\n      flags.parse && console.log(\"parsing\", elt);\n      this.parsingElement = elt;\n    },\n    markParsingComplete: function(elt) {\n      elt.__importParsed = true;\n      this.markDynamicParsingComplete(elt);\n      if (elt.__importElement) {\n        elt.__importElement.__importParsed = true;\n        this.markDynamicParsingComplete(elt.__importElement);\n      }\n      this.parsingElement = null;\n      flags.parse && console.log(\"completed\", elt);\n    },\n    markDynamicParsingComplete: function(elt) {\n      var i = this.dynamicElements.indexOf(elt);\n      if (i >= 0) {\n        this.dynamicElements.splice(i, 1);\n      }\n    },\n    parseImport: function(elt) {\n      elt.import = elt.__doc;\n      if (window.HTMLImports.__importsParsingHook) {\n        window.HTMLImports.__importsParsingHook(elt);\n      }\n      if (elt.import) {\n        elt.import.__importParsed = true;\n      }\n      this.markParsingComplete(elt);\n      if (elt.__resource && !elt.__error) {\n        elt.dispatchEvent(new CustomEvent(\"load\", {\n          bubbles: false\n        }));\n      } else {\n        elt.dispatchEvent(new CustomEvent(\"error\", {\n          bubbles: false\n        }));\n      }\n      if (elt.__pending) {\n        var fn;\n        while (elt.__pending.length) {\n          fn = elt.__pending.shift();\n          if (fn) {\n            fn({\n              target: elt\n            });\n          }\n        }\n      }\n      this.parseNext();\n    },\n    parseLink: function(linkElt) {\n      if (nodeIsImport(linkElt)) {\n        this.parseImport(linkElt);\n      } else {\n        linkElt.href = linkElt.href;\n        this.parseGeneric(linkElt);\n      }\n    },\n    parseStyle: function(elt) {\n      var src = elt;\n      elt = cloneStyle(elt);\n      src.__appliedElement = elt;\n      elt.__importElement = src;\n      this.parseGeneric(elt);\n    },\n    parseGeneric: function(elt) {\n      this.trackElement(elt);\n      this.addElementToDocument(elt);\n    },\n    rootImportForElement: function(elt) {\n      var n = elt;\n      while (n.ownerDocument.__importLink) {\n        n = n.ownerDocument.__importLink;\n      }\n      return n;\n    },\n    addElementToDocument: function(elt) {\n      var port = this.rootImportForElement(elt.__importElement || elt);\n      port.parentNode.insertBefore(elt, port);\n    },\n    trackElement: function(elt, callback) {\n      var self = this;\n      var done = function(e) {\n        elt.removeEventListener(\"load\", done);\n        elt.removeEventListener(\"error\", done);\n        if (callback) {\n          callback(e);\n        }\n        self.markParsingComplete(elt);\n        self.parseNext();\n      };\n      elt.addEventListener(\"load\", done);\n      elt.addEventListener(\"error\", done);\n      if (isIE && elt.localName === \"style\") {\n        var fakeLoad = false;\n        if (elt.textContent.indexOf(\"@import\") == -1) {\n          fakeLoad = true;\n        } else if (elt.sheet) {\n          fakeLoad = true;\n          var csr = elt.sheet.cssRules;\n          var len = csr ? csr.length : 0;\n          for (var i = 0, r; i < len && (r = csr[i]); i++) {\n            if (r.type === CSSRule.IMPORT_RULE) {\n              fakeLoad = fakeLoad && Boolean(r.styleSheet);\n            }\n          }\n        }\n        if (fakeLoad) {\n          setTimeout(function() {\n            elt.dispatchEvent(new CustomEvent(\"load\", {\n              bubbles: false\n            }));\n          });\n        }\n      }\n    },\n    parseScript: function(scriptElt) {\n      var script = document.createElement(\"script\");\n      script.__importElement = scriptElt;\n      script.src = scriptElt.src ? scriptElt.src : generateScriptDataUrl(scriptElt);\n      scope.currentScript = scriptElt;\n      this.trackElement(script, function(e) {\n        if (script.parentNode) {\n          script.parentNode.removeChild(script);\n        }\n        scope.currentScript = null;\n      });\n      this.addElementToDocument(script);\n    },\n    nextToParse: function() {\n      this._mayParse = [];\n      return !this.parsingElement && (this.nextToParseInDoc(rootDocument) || this.nextToParseDynamic());\n    },\n    nextToParseInDoc: function(doc, link) {\n      if (doc && this._mayParse.indexOf(doc) < 0) {\n        this._mayParse.push(doc);\n        var nodes = doc.querySelectorAll(this.parseSelectorsForNode(doc));\n        for (var i = 0, l = nodes.length, n; i < l && (n = nodes[i]); i++) {\n          if (!this.isParsed(n)) {\n            if (this.hasResource(n)) {\n              return nodeIsImport(n) ? this.nextToParseInDoc(n.__doc, n) : n;\n            } else {\n              return;\n            }\n          }\n        }\n      }\n      return link;\n    },\n    nextToParseDynamic: function() {\n      return this.dynamicElements[0];\n    },\n    parseSelectorsForNode: function(node) {\n      var doc = node.ownerDocument || node;\n      return doc === rootDocument ? this.documentSelectors : this.importsSelectors;\n    },\n    isParsed: function(node) {\n      return node.__importParsed;\n    },\n    needsDynamicParsing: function(elt) {\n      return this.dynamicElements.indexOf(elt) >= 0;\n    },\n    hasResource: function(node) {\n      if (nodeIsImport(node) && node.__doc === undefined) {\n        return false;\n      }\n      return true;\n    }\n  };\n  function nodeIsImport(elt) {\n    return elt.localName === \"link\" && elt.rel === IMPORT_LINK_TYPE;\n  }\n  function generateScriptDataUrl(script) {\n    var scriptContent = generateScriptContent(script);\n    return \"data:text/javascript;charset=utf-8,\" + encodeURIComponent(scriptContent);\n  }\n  function generateScriptContent(script) {\n    return script.textContent + generateSourceMapHint(script);\n  }\n  function generateSourceMapHint(script) {\n    var owner = script.ownerDocument;\n    owner.__importedScripts = owner.__importedScripts || 0;\n    var moniker = script.ownerDocument.baseURI;\n    var num = owner.__importedScripts ? \"-\" + owner.__importedScripts : \"\";\n    owner.__importedScripts++;\n    return \"\\n//# sourceURL=\" + moniker + num + \".js\\n\";\n  }\n  function cloneStyle(style) {\n    var clone = style.ownerDocument.createElement(\"style\");\n    clone.textContent = style.textContent;\n    path.resolveUrlsInStyle(clone);\n    return clone;\n  }\n  scope.parser = importParser;\n  scope.IMPORT_SELECTOR = IMPORT_SELECTOR;\n});\n\nwindow.HTMLImports.addModule(function(scope) {\n  var flags = scope.flags;\n  var IMPORT_LINK_TYPE = scope.IMPORT_LINK_TYPE;\n  var IMPORT_SELECTOR = scope.IMPORT_SELECTOR;\n  var rootDocument = scope.rootDocument;\n  var Loader = scope.Loader;\n  var Observer = scope.Observer;\n  var parser = scope.parser;\n  var importer = {\n    documents: {},\n    documentPreloadSelectors: IMPORT_SELECTOR,\n    importsPreloadSelectors: [ IMPORT_SELECTOR ].join(\",\"),\n    loadNode: function(node) {\n      importLoader.addNode(node);\n    },\n    loadSubtree: function(parent) {\n      var nodes = this.marshalNodes(parent);\n      importLoader.addNodes(nodes);\n    },\n    marshalNodes: function(parent) {\n      return parent.querySelectorAll(this.loadSelectorsForNode(parent));\n    },\n    loadSelectorsForNode: function(node) {\n      var doc = node.ownerDocument || node;\n      return doc === rootDocument ? this.documentPreloadSelectors : this.importsPreloadSelectors;\n    },\n    loaded: function(url, elt, resource, err, redirectedUrl) {\n      flags.load && console.log(\"loaded\", url, elt);\n      elt.__resource = resource;\n      elt.__error = err;\n      if (isImportLink(elt)) {\n        var doc = this.documents[url];\n        if (doc === undefined) {\n          doc = err ? null : makeDocument(resource, redirectedUrl || url);\n          if (doc) {\n            doc.__importLink = elt;\n            this.bootDocument(doc);\n          }\n          this.documents[url] = doc;\n        }\n        elt.__doc = doc;\n      }\n      parser.parseNext();\n    },\n    bootDocument: function(doc) {\n      this.loadSubtree(doc);\n      this.observer.observe(doc);\n      parser.parseNext();\n    },\n    loadedAll: function() {\n      parser.parseNext();\n    }\n  };\n  var importLoader = new Loader(importer.loaded.bind(importer), importer.loadedAll.bind(importer));\n  importer.observer = new Observer();\n  function isImportLink(elt) {\n    return isLinkRel(elt, IMPORT_LINK_TYPE);\n  }\n  function isLinkRel(elt, rel) {\n    return elt.localName === \"link\" && elt.getAttribute(\"rel\") === rel;\n  }\n  function hasBaseURIAccessor(doc) {\n    return !!Object.getOwnPropertyDescriptor(doc, \"baseURI\");\n  }\n  function makeDocument(resource, url) {\n    var doc = document.implementation.createHTMLDocument(IMPORT_LINK_TYPE);\n    doc._URL = url;\n    var base = doc.createElement(\"base\");\n    base.setAttribute(\"href\", url);\n    if (!doc.baseURI && !hasBaseURIAccessor(doc)) {\n      Object.defineProperty(doc, \"baseURI\", {\n        value: url\n      });\n    }\n    var meta = doc.createElement(\"meta\");\n    meta.setAttribute(\"charset\", \"utf-8\");\n    doc.head.appendChild(meta);\n    doc.head.appendChild(base);\n    doc.body.innerHTML = resource;\n    if (window.HTMLTemplateElement && HTMLTemplateElement.bootstrap) {\n      HTMLTemplateElement.bootstrap(doc);\n    }\n    return doc;\n  }\n  if (!document.baseURI) {\n    var baseURIDescriptor = {\n      get: function() {\n        var base = document.querySelector(\"base\");\n        return base ? base.href : window.location.href;\n      },\n      configurable: true\n    };\n    Object.defineProperty(document, \"baseURI\", baseURIDescriptor);\n    Object.defineProperty(rootDocument, \"baseURI\", baseURIDescriptor);\n  }\n  scope.importer = importer;\n  scope.importLoader = importLoader;\n});\n\nwindow.HTMLImports.addModule(function(scope) {\n  var parser = scope.parser;\n  var importer = scope.importer;\n  var dynamic = {\n    added: function(nodes) {\n      var owner, parsed, loading;\n      for (var i = 0, l = nodes.length, n; i < l && (n = nodes[i]); i++) {\n        if (!owner) {\n          owner = n.ownerDocument;\n          parsed = parser.isParsed(owner);\n        }\n        loading = this.shouldLoadNode(n);\n        if (loading) {\n          importer.loadNode(n);\n        }\n        if (this.shouldParseNode(n) && parsed) {\n          parser.parseDynamic(n, loading);\n        }\n      }\n    },\n    shouldLoadNode: function(node) {\n      return node.nodeType === 1 && matches.call(node, importer.loadSelectorsForNode(node));\n    },\n    shouldParseNode: function(node) {\n      return node.nodeType === 1 && matches.call(node, parser.parseSelectorsForNode(node));\n    }\n  };\n  importer.observer.addCallback = dynamic.added.bind(dynamic);\n  var matches = HTMLElement.prototype.matches || HTMLElement.prototype.matchesSelector || HTMLElement.prototype.webkitMatchesSelector || HTMLElement.prototype.mozMatchesSelector || HTMLElement.prototype.msMatchesSelector;\n});\n\n(function(scope) {\n  var initializeModules = scope.initializeModules;\n  var isIE = scope.isIE;\n  if (scope.useNative) {\n    return;\n  }\n  initializeModules();\n  var rootDocument = scope.rootDocument;\n  function bootstrap() {\n    window.HTMLImports.importer.bootDocument(rootDocument);\n  }\n  if (document.readyState === \"complete\" || document.readyState === \"interactive\" && !window.attachEvent) {\n    bootstrap();\n  } else {\n    document.addEventListener(\"DOMContentLoaded\", bootstrap);\n  }\n})(window.HTMLImports);\n\nwindow.CustomElements = window.CustomElements || {\n  flags: {}\n};\n\n(function(scope) {\n  var flags = scope.flags;\n  var modules = [];\n  var addModule = function(module) {\n    modules.push(module);\n  };\n  var initializeModules = function() {\n    modules.forEach(function(module) {\n      module(scope);\n    });\n  };\n  scope.addModule = addModule;\n  scope.initializeModules = initializeModules;\n  scope.hasNative = Boolean(document.registerElement);\n  scope.isIE = /Trident/.test(navigator.userAgent);\n  scope.useNative = !flags.register && scope.hasNative && !window.ShadowDOMPolyfill && (!window.HTMLImports || window.HTMLImports.useNative);\n})(window.CustomElements);\n\nwindow.CustomElements.addModule(function(scope) {\n  var IMPORT_LINK_TYPE = window.HTMLImports ? window.HTMLImports.IMPORT_LINK_TYPE : \"none\";\n  function forSubtree(node, cb) {\n    findAllElements(node, function(e) {\n      if (cb(e)) {\n        return true;\n      }\n      forRoots(e, cb);\n    });\n    forRoots(node, cb);\n  }\n  function findAllElements(node, find, data) {\n    var e = node.firstElementChild;\n    if (!e) {\n      e = node.firstChild;\n      while (e && e.nodeType !== Node.ELEMENT_NODE) {\n        e = e.nextSibling;\n      }\n    }\n    while (e) {\n      if (find(e, data) !== true) {\n        findAllElements(e, find, data);\n      }\n      e = e.nextElementSibling;\n    }\n    return null;\n  }\n  function forRoots(node, cb) {\n    var root = node.shadowRoot;\n    while (root) {\n      forSubtree(root, cb);\n      root = root.olderShadowRoot;\n    }\n  }\n  function forDocumentTree(doc, cb) {\n    _forDocumentTree(doc, cb, []);\n  }\n  function _forDocumentTree(doc, cb, processingDocuments) {\n    doc = window.wrap(doc);\n    if (processingDocuments.indexOf(doc) >= 0) {\n      return;\n    }\n    processingDocuments.push(doc);\n    var imports = doc.querySelectorAll(\"link[rel=\" + IMPORT_LINK_TYPE + \"]\");\n    for (var i = 0, l = imports.length, n; i < l && (n = imports[i]); i++) {\n      if (n.import) {\n        _forDocumentTree(n.import, cb, processingDocuments);\n      }\n    }\n    cb(doc);\n  }\n  scope.forDocumentTree = forDocumentTree;\n  scope.forSubtree = forSubtree;\n});\n\nwindow.CustomElements.addModule(function(scope) {\n  var flags = scope.flags;\n  var forSubtree = scope.forSubtree;\n  var forDocumentTree = scope.forDocumentTree;\n  function addedNode(node, isAttached) {\n    return added(node, isAttached) || addedSubtree(node, isAttached);\n  }\n  function added(node, isAttached) {\n    if (scope.upgrade(node, isAttached)) {\n      return true;\n    }\n    if (isAttached) {\n      attached(node);\n    }\n  }\n  function addedSubtree(node, isAttached) {\n    forSubtree(node, function(e) {\n      if (added(e, isAttached)) {\n        return true;\n      }\n    });\n  }\n  var hasThrottledAttached = window.MutationObserver._isPolyfilled && flags[\"throttle-attached\"];\n  scope.hasPolyfillMutations = hasThrottledAttached;\n  scope.hasThrottledAttached = hasThrottledAttached;\n  var isPendingMutations = false;\n  var pendingMutations = [];\n  function deferMutation(fn) {\n    pendingMutations.push(fn);\n    if (!isPendingMutations) {\n      isPendingMutations = true;\n      setTimeout(takeMutations);\n    }\n  }\n  function takeMutations() {\n    isPendingMutations = false;\n    var $p = pendingMutations;\n    for (var i = 0, l = $p.length, p; i < l && (p = $p[i]); i++) {\n      p();\n    }\n    pendingMutations = [];\n  }\n  function attached(element) {\n    if (hasThrottledAttached) {\n      deferMutation(function() {\n        _attached(element);\n      });\n    } else {\n      _attached(element);\n    }\n  }\n  function _attached(element) {\n    if (element.__upgraded__ && !element.__attached) {\n      element.__attached = true;\n      if (element.attachedCallback) {\n        element.attachedCallback();\n      }\n    }\n  }\n  function detachedNode(node) {\n    detached(node);\n    forSubtree(node, function(e) {\n      detached(e);\n    });\n  }\n  function detached(element) {\n    if (hasThrottledAttached) {\n      deferMutation(function() {\n        _detached(element);\n      });\n    } else {\n      _detached(element);\n    }\n  }\n  function _detached(element) {\n    if (element.__upgraded__ && element.__attached) {\n      element.__attached = false;\n      if (element.detachedCallback) {\n        element.detachedCallback();\n      }\n    }\n  }\n  function inDocument(element) {\n    var p = element;\n    var doc = window.wrap(document);\n    while (p) {\n      if (p == doc) {\n        return true;\n      }\n      p = p.parentNode || p.nodeType === Node.DOCUMENT_FRAGMENT_NODE && p.host;\n    }\n  }\n  function watchShadow(node) {\n    if (node.shadowRoot && !node.shadowRoot.__watched) {\n      flags.dom && console.log(\"watching shadow-root for: \", node.localName);\n      var root = node.shadowRoot;\n      while (root) {\n        observe(root);\n        root = root.olderShadowRoot;\n      }\n    }\n  }\n  function handler(root, mutations) {\n    if (flags.dom) {\n      var mx = mutations[0];\n      if (mx && mx.type === \"childList\" && mx.addedNodes) {\n        if (mx.addedNodes) {\n          var d = mx.addedNodes[0];\n          while (d && d !== document && !d.host) {\n            d = d.parentNode;\n          }\n          var u = d && (d.URL || d._URL || d.host && d.host.localName) || \"\";\n          u = u.split(\"/?\").shift().split(\"/\").pop();\n        }\n      }\n      console.group(\"mutations (%d) [%s]\", mutations.length, u || \"\");\n    }\n    var isAttached = inDocument(root);\n    mutations.forEach(function(mx) {\n      if (mx.type === \"childList\") {\n        forEach(mx.addedNodes, function(n) {\n          if (!n.localName) {\n            return;\n          }\n          addedNode(n, isAttached);\n        });\n        forEach(mx.removedNodes, function(n) {\n          if (!n.localName) {\n            return;\n          }\n          detachedNode(n);\n        });\n      }\n    });\n    flags.dom && console.groupEnd();\n  }\n  function takeRecords(node) {\n    node = window.wrap(node);\n    if (!node) {\n      node = window.wrap(document);\n    }\n    while (node.parentNode) {\n      node = node.parentNode;\n    }\n    var observer = node.__observer;\n    if (observer) {\n      handler(node, observer.takeRecords());\n      takeMutations();\n    }\n  }\n  var forEach = Array.prototype.forEach.call.bind(Array.prototype.forEach);\n  function observe(inRoot) {\n    if (inRoot.__observer) {\n      return;\n    }\n    var observer = new MutationObserver(handler.bind(this, inRoot));\n    observer.observe(inRoot, {\n      childList: true,\n      subtree: true\n    });\n    inRoot.__observer = observer;\n  }\n  function upgradeDocument(doc) {\n    doc = window.wrap(doc);\n    flags.dom && console.group(\"upgradeDocument: \", doc.baseURI.split(\"/\").pop());\n    var isMainDocument = doc === window.wrap(document);\n    addedNode(doc, isMainDocument);\n    observe(doc);\n    flags.dom && console.groupEnd();\n  }\n  function upgradeDocumentTree(doc) {\n    forDocumentTree(doc, upgradeDocument);\n  }\n  var originalCreateShadowRoot = Element.prototype.createShadowRoot;\n  if (originalCreateShadowRoot) {\n    Element.prototype.createShadowRoot = function() {\n      var root = originalCreateShadowRoot.call(this);\n      window.CustomElements.watchShadow(this);\n      return root;\n    };\n  }\n  scope.watchShadow = watchShadow;\n  scope.upgradeDocumentTree = upgradeDocumentTree;\n  scope.upgradeDocument = upgradeDocument;\n  scope.upgradeSubtree = addedSubtree;\n  scope.upgradeAll = addedNode;\n  scope.attached = attached;\n  scope.takeRecords = takeRecords;\n});\n\nwindow.CustomElements.addModule(function(scope) {\n  var flags = scope.flags;\n  function upgrade(node, isAttached) {\n    if (node.localName === \"template\") {\n      if (window.HTMLTemplateElement && HTMLTemplateElement.decorate) {\n        HTMLTemplateElement.decorate(node);\n      }\n    }\n    if (!node.__upgraded__ && node.nodeType === Node.ELEMENT_NODE) {\n      var is = node.getAttribute(\"is\");\n      var definition = scope.getRegisteredDefinition(node.localName) || scope.getRegisteredDefinition(is);\n      if (definition) {\n        if (is && definition.tag == node.localName || !is && !definition.extends) {\n          return upgradeWithDefinition(node, definition, isAttached);\n        }\n      }\n    }\n  }\n  function upgradeWithDefinition(element, definition, isAttached) {\n    flags.upgrade && console.group(\"upgrade:\", element.localName);\n    if (definition.is) {\n      element.setAttribute(\"is\", definition.is);\n    }\n    implementPrototype(element, definition);\n    element.__upgraded__ = true;\n    created(element);\n    if (isAttached) {\n      scope.attached(element);\n    }\n    scope.upgradeSubtree(element, isAttached);\n    flags.upgrade && console.groupEnd();\n    return element;\n  }\n  function implementPrototype(element, definition) {\n    if (Object.__proto__) {\n      element.__proto__ = definition.prototype;\n    } else {\n      customMixin(element, definition.prototype, definition.native);\n      element.__proto__ = definition.prototype;\n    }\n  }\n  function customMixin(inTarget, inSrc, inNative) {\n    var used = {};\n    var p = inSrc;\n    while (p !== inNative && p !== HTMLElement.prototype) {\n      var keys = Object.getOwnPropertyNames(p);\n      for (var i = 0, k; k = keys[i]; i++) {\n        if (!used[k]) {\n          Object.defineProperty(inTarget, k, Object.getOwnPropertyDescriptor(p, k));\n          used[k] = 1;\n        }\n      }\n      p = Object.getPrototypeOf(p);\n    }\n  }\n  function created(element) {\n    if (element.createdCallback) {\n      element.createdCallback();\n    }\n  }\n  scope.upgrade = upgrade;\n  scope.upgradeWithDefinition = upgradeWithDefinition;\n  scope.implementPrototype = implementPrototype;\n});\n\nwindow.CustomElements.addModule(function(scope) {\n  var isIE = scope.isIE;\n  var upgradeDocumentTree = scope.upgradeDocumentTree;\n  var upgradeAll = scope.upgradeAll;\n  var upgradeWithDefinition = scope.upgradeWithDefinition;\n  var implementPrototype = scope.implementPrototype;\n  var useNative = scope.useNative;\n  function register(name, options) {\n    var definition = options || {};\n    if (!name) {\n      throw new Error(\"document.registerElement: first argument `name` must not be empty\");\n    }\n    if (name.indexOf(\"-\") < 0) {\n      throw new Error(\"document.registerElement: first argument ('name') must contain a dash ('-'). Argument provided was '\" + String(name) + \"'.\");\n    }\n    if (isReservedTag(name)) {\n      throw new Error(\"Failed to execute 'registerElement' on 'Document': Registration failed for type '\" + String(name) + \"'. The type name is invalid.\");\n    }\n    if (getRegisteredDefinition(name)) {\n      throw new Error(\"DuplicateDefinitionError: a type with name '\" + String(name) + \"' is already registered\");\n    }\n    if (!definition.prototype) {\n      definition.prototype = Object.create(HTMLElement.prototype);\n    }\n    definition.__name = name.toLowerCase();\n    if (definition.extends) {\n      definition.extends = definition.extends.toLowerCase();\n    }\n    definition.lifecycle = definition.lifecycle || {};\n    definition.ancestry = ancestry(definition.extends);\n    resolveTagName(definition);\n    resolvePrototypeChain(definition);\n    overrideAttributeApi(definition.prototype);\n    registerDefinition(definition.__name, definition);\n    definition.ctor = generateConstructor(definition);\n    definition.ctor.prototype = definition.prototype;\n    definition.prototype.constructor = definition.ctor;\n    if (scope.ready) {\n      upgradeDocumentTree(document);\n    }\n    return definition.ctor;\n  }\n  function overrideAttributeApi(prototype) {\n    if (prototype.setAttribute._polyfilled) {\n      return;\n    }\n    var setAttribute = prototype.setAttribute;\n    prototype.setAttribute = function(name, value) {\n      changeAttribute.call(this, name, value, setAttribute);\n    };\n    var removeAttribute = prototype.removeAttribute;\n    prototype.removeAttribute = function(name) {\n      changeAttribute.call(this, name, null, removeAttribute);\n    };\n    prototype.setAttribute._polyfilled = true;\n  }\n  function changeAttribute(name, value, operation) {\n    name = name.toLowerCase();\n    var oldValue = this.getAttribute(name);\n    operation.apply(this, arguments);\n    var newValue = this.getAttribute(name);\n    if (this.attributeChangedCallback && newValue !== oldValue) {\n      this.attributeChangedCallback(name, oldValue, newValue);\n    }\n  }\n  function isReservedTag(name) {\n    for (var i = 0; i < reservedTagList.length; i++) {\n      if (name === reservedTagList[i]) {\n        return true;\n      }\n    }\n  }\n  var reservedTagList = [ \"annotation-xml\", \"color-profile\", \"font-face\", \"font-face-src\", \"font-face-uri\", \"font-face-format\", \"font-face-name\", \"missing-glyph\" ];\n  function ancestry(extnds) {\n    var extendee = getRegisteredDefinition(extnds);\n    if (extendee) {\n      return ancestry(extendee.extends).concat([ extendee ]);\n    }\n    return [];\n  }\n  function resolveTagName(definition) {\n    var baseTag = definition.extends;\n    for (var i = 0, a; a = definition.ancestry[i]; i++) {\n      baseTag = a.is && a.tag;\n    }\n    definition.tag = baseTag || definition.__name;\n    if (baseTag) {\n      definition.is = definition.__name;\n    }\n  }\n  function resolvePrototypeChain(definition) {\n    if (!Object.__proto__) {\n      var nativePrototype = HTMLElement.prototype;\n      if (definition.is) {\n        var inst = document.createElement(definition.tag);\n        nativePrototype = Object.getPrototypeOf(inst);\n      }\n      var proto = definition.prototype, ancestor;\n      var foundPrototype = false;\n      while (proto) {\n        if (proto == nativePrototype) {\n          foundPrototype = true;\n        }\n        ancestor = Object.getPrototypeOf(proto);\n        if (ancestor) {\n          proto.__proto__ = ancestor;\n        }\n        proto = ancestor;\n      }\n      if (!foundPrototype) {\n        console.warn(definition.tag + \" prototype not found in prototype chain for \" + definition.is);\n      }\n      definition.native = nativePrototype;\n    }\n  }\n  function instantiate(definition) {\n    return upgradeWithDefinition(domCreateElement(definition.tag), definition);\n  }\n  var registry = {};\n  function getRegisteredDefinition(name) {\n    if (name) {\n      return registry[name.toLowerCase()];\n    }\n  }\n  function registerDefinition(name, definition) {\n    registry[name] = definition;\n  }\n  function generateConstructor(definition) {\n    return function() {\n      return instantiate(definition);\n    };\n  }\n  var HTML_NAMESPACE = \"http://www.w3.org/1999/xhtml\";\n  function createElementNS(namespace, tag, typeExtension) {\n    if (namespace === HTML_NAMESPACE) {\n      return createElement(tag, typeExtension);\n    } else {\n      return domCreateElementNS(namespace, tag);\n    }\n  }\n  function createElement(tag, typeExtension) {\n    if (tag) {\n      tag = tag.toLowerCase();\n    }\n    if (typeExtension) {\n      typeExtension = typeExtension.toLowerCase();\n    }\n    var definition = getRegisteredDefinition(typeExtension || tag);\n    if (definition) {\n      if (tag == definition.tag && typeExtension == definition.is) {\n        return new definition.ctor();\n      }\n      if (!typeExtension && !definition.is) {\n        return new definition.ctor();\n      }\n    }\n    var element;\n    if (typeExtension) {\n      element = createElement(tag);\n      element.setAttribute(\"is\", typeExtension);\n      return element;\n    }\n    element = domCreateElement(tag);\n    if (tag.indexOf(\"-\") >= 0) {\n      implementPrototype(element, HTMLElement);\n    }\n    return element;\n  }\n  var domCreateElement = document.createElement.bind(document);\n  var domCreateElementNS = document.createElementNS.bind(document);\n  var isInstance;\n  if (!Object.__proto__ && !useNative) {\n    isInstance = function(obj, ctor) {\n      if (obj instanceof ctor) {\n        return true;\n      }\n      var p = obj;\n      while (p) {\n        if (p === ctor.prototype) {\n          return true;\n        }\n        p = p.__proto__;\n      }\n      return false;\n    };\n  } else {\n    isInstance = function(obj, base) {\n      return obj instanceof base;\n    };\n  }\n  function wrapDomMethodToForceUpgrade(obj, methodName) {\n    var orig = obj[methodName];\n    obj[methodName] = function() {\n      var n = orig.apply(this, arguments);\n      upgradeAll(n);\n      return n;\n    };\n  }\n  wrapDomMethodToForceUpgrade(Node.prototype, \"cloneNode\");\n  wrapDomMethodToForceUpgrade(document, \"importNode\");\n  document.registerElement = register;\n  document.createElement = createElement;\n  document.createElementNS = createElementNS;\n  scope.registry = registry;\n  scope.instanceof = isInstance;\n  scope.reservedTagList = reservedTagList;\n  scope.getRegisteredDefinition = getRegisteredDefinition;\n  document.register = document.registerElement;\n});\n\n(function(scope) {\n  var useNative = scope.useNative;\n  var initializeModules = scope.initializeModules;\n  var isIE = scope.isIE;\n  if (useNative) {\n    var nop = function() {};\n    scope.watchShadow = nop;\n    scope.upgrade = nop;\n    scope.upgradeAll = nop;\n    scope.upgradeDocumentTree = nop;\n    scope.upgradeSubtree = nop;\n    scope.takeRecords = nop;\n    scope.instanceof = function(obj, base) {\n      return obj instanceof base;\n    };\n  } else {\n    initializeModules();\n  }\n  var upgradeDocumentTree = scope.upgradeDocumentTree;\n  var upgradeDocument = scope.upgradeDocument;\n  if (!window.wrap) {\n    if (window.ShadowDOMPolyfill) {\n      window.wrap = window.ShadowDOMPolyfill.wrapIfNeeded;\n      window.unwrap = window.ShadowDOMPolyfill.unwrapIfNeeded;\n    } else {\n      window.wrap = window.unwrap = function(node) {\n        return node;\n      };\n    }\n  }\n  if (window.HTMLImports) {\n    window.HTMLImports.__importsParsingHook = function(elt) {\n      if (elt.import) {\n        upgradeDocument(wrap(elt.import));\n      }\n    };\n  }\n  function bootstrap() {\n    upgradeDocumentTree(window.wrap(document));\n    window.CustomElements.ready = true;\n    var requestAnimationFrame = window.requestAnimationFrame || function(f) {\n      setTimeout(f, 16);\n    };\n    requestAnimationFrame(function() {\n      setTimeout(function() {\n        window.CustomElements.readyTime = Date.now();\n        if (window.HTMLImports) {\n          window.CustomElements.elapsed = window.CustomElements.readyTime - window.HTMLImports.readyTime;\n        }\n        document.dispatchEvent(new CustomEvent(\"WebComponentsReady\", {\n          bubbles: true\n        }));\n      });\n    });\n  }\n  if (document.readyState === \"complete\" || scope.flags.eager) {\n    bootstrap();\n  } else if (document.readyState === \"interactive\" && !window.attachEvent && (!window.HTMLImports || window.HTMLImports.ready)) {\n    bootstrap();\n  } else {\n    var loadEvent = window.HTMLImports && !window.HTMLImports.ready ? \"HTMLImportsLoaded\" : \"DOMContentLoaded\";\n    window.addEventListener(loadEvent, bootstrap);\n  }\n})(window.CustomElements);\n\n(function(scope) {\n  var style = document.createElement(\"style\");\n  style.textContent = \"\" + \"body {\" + \"transition: opacity ease-in 0.2s;\" + \" } \\n\" + \"body[unresolved] {\" + \"opacity: 0; display: block; overflow: hidden; position: relative;\" + \" } \\n\";\n  var head = document.querySelector(\"head\");\n  head.insertBefore(style, head.firstChild);\n})(window.WebComponents);"],"sourceRoot":""}